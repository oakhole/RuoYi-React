(self.webpackChunkruoyi_react=self.webpackChunkruoyi_react||[]).push([[9531],{5966:function(q,$,a){"use strict";var _=a(22122),W=a(81253),ee=a(67294),B=a(63990),ue=["fieldProps","proFieldProps"],R=["fieldProps","proFieldProps"],K="text",L=function(C){var O=C.fieldProps,b=C.proFieldProps,l=(0,W.Z)(C,ue);return ee.createElement(B.Z,(0,_.Z)({mode:"edit",valueType:K,fieldProps:O,filedConfig:{valueType:K},proFieldProps:b},l))},Z=function(C){var O=C.fieldProps,b=C.proFieldProps,l=(0,W.Z)(C,R);return ee.createElement(B.Z,(0,_.Z)({mode:"edit",valueType:"password",fieldProps:O,proFieldProps:b,filedConfig:{valueType:K}},l))},x=L;x.Password=Z,x.displayName="ProFormComponent",$.Z=x},34687:function(q){q.exports={container:"antd-pro-pages-user-login-index-container",content:"antd-pro-pages-user-login-index-content",leftSide:"antd-pro-pages-user-login-index-leftSide",mask:"antd-pro-pages-user-login-index-mask",circles:"antd-pro-pages-user-login-index-circles",animate:"antd-pro-pages-user-login-index-animate",slogan:"antd-pro-pages-user-login-index-slogan",title:"antd-pro-pages-user-login-index-title",desc:"antd-pro-pages-user-login-index-desc",rightSide:"antd-pro-pages-user-login-index-rightSide",form:"antd-pro-pages-user-login-index-form",top:"antd-pro-pages-user-login-index-top",header:"antd-pro-pages-user-login-index-header",logo:"antd-pro-pages-user-login-index-logo",main:"antd-pro-pages-user-login-index-main",icon:"antd-pro-pages-user-login-index-icon",other:"antd-pro-pages-user-login-index-other",register:"antd-pro-pages-user-login-index-register",prefixIcon:"antd-pro-pages-user-login-index-prefixIcon"}},59252:function(q,$,a){"use strict";a.r($),a.d($,{default:function(){return Je}});var _=a(49111),W=a(19650),ee=a(47673),B=a(4107),ue=a(18106),R=a(51752),K=a(34792),L=a(48086),Z=a(11849),x=a(3182),F=a(2824),C=a(17462),O=a(76772),b=a(94043),l=a.n(b),xe=a(89366),oe=a(2603),Pe=a(80821),Ze=a(80521),je=a(36108),ye=a(48107),Ce=a(39464),i=a(67294),Qe=a(9715),Fe=a(86835),Xe=a(57663),Se=a(71577),z=a(22122),ae=a(28991),Ee=a(87757),V=a.n(Ee),de=a(92137),ce=a(81253),re=a(28481),pe=a(64893),Te=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],Ie=i.forwardRef(function(t,p){var f=(0,i.useState)(t.countDown||60),m=(0,re.Z)(f,2),P=m[0],A=m[1],I=(0,i.useState)(!1),S=(0,re.Z)(I,2),N=S[0],M=S[1],H=(0,i.useState)(),j=(0,re.Z)(H,2),ne=j[0],D=j[1],U=t.rules,ve=t.name,G=t.phoneName,E=t.fieldProps,J=t.captchaTextRender,ie=J===void 0?function(h,g){return h?"".concat(g," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:J,le=t.captchaProps,Q=(0,ce.Z)(t,Te),X=function(){var h=(0,de.Z)(V().mark(function g(y){return V().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,D(!0),s.next=4,Q.onGetCaptcha(y);case 4:D(!1),M(!0),s.next=13;break;case 8:s.prev=8,s.t0=s.catch(0),M(!1),D(!1),console.log(s.t0);case 13:case"end":return s.stop()}},g,null,[[0,8]])}));return function(y){return h.apply(this,arguments)}}();return(0,i.useEffect)(function(){var h=0,g=t.countDown;return N&&(h=window.setInterval(function(){A(function(y){return y<=1?(M(!1),clearInterval(h),g||60):y-1})},1e3)),function(){return clearInterval(h)}},[N]),i.createElement(Fe.Z.Item,{noStyle:!0,shouldUpdate:!0},function(h){var g=h.getFieldValue,y=h.validateFields;return i.createElement("div",{style:(0,ae.Z)((0,ae.Z)({},E==null?void 0:E.style),{},{display:"flex",alignItems:"center"}),ref:p},i.createElement(B.Z,(0,z.Z)({},E,{style:{flex:1,transition:"width .3s",marginRight:8}})),i.createElement(Se.Z,(0,z.Z)({style:{display:"block"},disabled:N,loading:ne},le,{onClick:(0,de.Z)(V().mark(function w(){var s;return V().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!G){r.next=9;break}return r.next=4,y([G].flat(1));case 4:return s=g([G].flat(1)),r.next=7,X(s);case 7:r.next=11;break;case 9:return r.next=11,X("");case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0);case 16:case"end":return r.stop()}},w,null,[[0,13]])}))}),ie(N,P)))})}),Ne=(0,pe.G)(Ie),De=Ne,we=a(63185),Be=a(9676),Re=a(63990),Le=a(22270),Oe=["options","fieldProps","proFieldProps","valueEnum"],be=i.forwardRef(function(t,p){var f=t.options,m=t.fieldProps,P=t.proFieldProps,A=t.valueEnum,I=(0,ce.Z)(t,Oe);return i.createElement(Re.Z,(0,z.Z)({ref:p,valueType:"checkbox",mode:"edit",valueEnum:(0,Le.h)(A,void 0),fieldProps:(0,ae.Z)({options:f},m),proFieldProps:P},I))}),Ae=i.forwardRef(function(t,p){var f=t.fieldProps,m=t.children;return i.createElement(Be.Z,(0,z.Z)({ref:p},f),m)}),Me=(0,pe.G)(Ae,{valuePropName:"checked"}),me=Me;me.Group=be;var Ue=me,Ge=a(952),Y=a(5966),T=a(43581),$e=a(73727),We=a(29791),Ke=a(36571);function ze(t,p){return te.apply(this,arguments)}function te(){return te=(0,x.Z)(l().mark(function t(p,f){return l().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,T.WY)("/api/login/captcha",(0,Z.Z)({method:"GET",params:(0,Z.Z)({},p)},f||{})));case 1:case"end":return P.stop()}},t)})),te.apply(this,arguments)}function Ve(t){return se.apply(this,arguments)}function se(){return se=(0,x.Z)(l().mark(function t(p){return l().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,T.WY)("/api/captchaImage",(0,Z.Z)({method:"GET"},p||{})));case 1:case"end":return m.stop()}},t)})),se.apply(this,arguments)}var Ye=a(34687),n=a.n(Ye),e=a(85893),fe=function(p){var f=p.content;return(0,e.jsx)(O.Z,{closable:!0,style:{marginBottom:24},message:f,type:"error",showIcon:!0})},He=function(){var p=(0,i.useState)(!1),f=(0,F.Z)(p,2),m=f[0],P=f[1],A=(0,i.useState)({}),I=(0,F.Z)(A,2),S=I[0],N=I[1],M=(0,i.useState)("account"),H=(0,F.Z)(M,2),j=H[0],ne=H[1],D=(0,T.tT)("@@initialState"),U=D.initialState,ve=D.setInitialState,G=(0,i.useState)(""),E=(0,F.Z)(G,2),J=E[0],ie=E[1],le=(0,i.useState)(""),Q=(0,F.Z)(le,2),X=Q[0],h=Q[1],g=function(){var s=(0,x.Z)(l().mark(function u(){return l().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:Ve().then(function(v){v&&(ie(v.uuid),h(v.img))});case 1:case"end":return d.stop()}},u)}));return function(){return s.apply(this,arguments)}}();(0,i.useEffect)(function(){g()},[]);var y=function(){var s=(0,x.Z)(l().mark(function u(){var r,d;return l().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,U==null||(r=U.fetchUserInfo)===null||r===void 0?void 0:r.call(U);case 2:if(d=o.sent,!d){o.next=6;break}return o.next=6,ve(function(k){return(0,Z.Z)((0,Z.Z)({},k),{},{currentUser:d})});case 6:case"end":return o.stop()}},u)}));return function(){return s.apply(this,arguments)}}(),w=function(){var s=(0,x.Z)(l().mark(function u(r){var d,v,o,k,he,ge;return l().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return P(!0),c.prev=1,r.uuid=J,c.next=5,(0,Ke.x4)((0,Z.Z)((0,Z.Z)({},r),{},{type:j}));case 5:if(d=c.sent,d.code!==200){c.next=18;break}return localStorage.setItem("token",d.token||""),v="\u767B\u5F55\u6210\u529F\uFF01",L.default.success(v),c.next=12,y();case 12:if(T.m8){c.next=14;break}return c.abrupt("return");case 14:return o=T.m8.location.query,k=o,he=k.redirect,T.m8.push(he||"/"),c.abrupt("return");case 18:N(d),g(),c.next=26;break;case 22:c.prev=22,c.t0=c.catch(1),ge="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",L.default.error(ge);case 26:P(!1);case 27:case"end":return c.stop()}},u,null,[[1,22]])}));return function(r){return s.apply(this,arguments)}}();return(0,e.jsx)("div",{className:n().container,children:(0,e.jsxs)("div",{className:n().content,children:[(0,e.jsxs)("div",{className:n().leftSide,children:[(0,e.jsx)("div",{className:n().mask}),(0,e.jsxs)("ul",{className:n().circles,children:[(0,e.jsx)("li",{}),(0,e.jsx)("li",{}),(0,e.jsx)("li",{}),(0,e.jsx)("li",{}),(0,e.jsx)("li",{}),(0,e.jsx)("li",{}),(0,e.jsx)("li",{}),(0,e.jsx)("li",{}),(0,e.jsx)("li",{}),(0,e.jsx)("li",{})]}),(0,e.jsxs)("div",{className:n().slogan,children:[(0,e.jsx)("div",{className:n().title,children:"\u6B22\u8FCE\u5149\u4E34"}),(0,e.jsx)("div",{className:n().desc,children:"\u6B22\u8FCE\u6765\u5230\u597D\u73A9\u4FF1\u4E50\u90E8\uFF0C\u5728\u8FD9\u91CC\u548C\u5FD7\u540C\u9053\u5408\u7684\u670B\u53CB\u4E00\u8D77\u5206\u4EAB\u6709\u8DA3\u7684\u6545\u4E8B\uFF0C\u4E00\u8D77\u7EC4\u7EC7\u6709\u8DA3\u7684\u6D3B\u52A8..."})]})]}),(0,e.jsx)("div",{className:n().rightSide,children:(0,e.jsxs)("div",{className:n().form,children:[(0,e.jsxs)("div",{className:n().top,children:[(0,e.jsx)("div",{className:n().header,children:(0,e.jsx)($e.rU,{to:"/",children:(0,e.jsx)("span",{className:n().title,children:"RuoYi-React"})})}),(0,e.jsx)("div",{className:n().desc,children:"\u57FA\u4E8E RuoYi-Vue \u63D0\u4F9B\u670D\u52A1\u5B9E\u73B0 React \u524D\u7AEF UI"})]}),(0,e.jsxs)("div",{className:n().main,children:[(0,e.jsxs)(Ge.ZP,{initialValues:{autoLogin:!0,username:"admin",password:"admin123"},submitter:{searchConfig:{submitText:"\u767B\u5F55"},render:function(u,r){return r.pop()},submitButtonProps:{loading:m,size:"large",style:{width:"100%",fontWeight:600,backgroundImage:"linear-gradient(to right, #6366f1, #2563eb)",borderRadius:"9999px",justifyContent:"center",backgroundColor:"transparent"}}},onFinish:function(){var s=(0,x.Z)(l().mark(function u(r){return l().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,w(r);case 2:case"end":return v.stop()}},u)}));return function(u){return s.apply(this,arguments)}}(),isKeyPressSubmit:!0,children:[(0,e.jsxs)(R.Z,{activeKey:j,onChange:ne,children:[(0,e.jsx)(R.Z.TabPane,{tab:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"},"account"),(0,e.jsx)(R.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",style:{color:"white"}},"mobile")]}),S.code===500&&j==="account"&&(0,e.jsx)(fe,{content:S.msg||"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),j==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.Z,{name:"username",fieldProps:{size:"middle",prefix:(0,e.jsx)(xe.Z,{className:n().prefixIcon})},placeholder:"\u8D26\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u60A8\u7684\u8D26\u53F7"}]}),(0,e.jsx)(Y.Z.Password,{name:"password",fieldProps:{size:"middle",prefix:(0,e.jsx)(oe.Z,{className:n().prefixIcon})},placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u60A8\u7684\u5BC6\u7801"}]}),(0,e.jsxs)(B.Z.Group,{compact:!0,children:[(0,e.jsx)(Y.Z,{name:"code",fieldProps:{size:"middle",prefix:(0,e.jsx)(Pe.Z,{className:n().prefixIcon})},placeholder:"\u9A8C\u8BC1\u7801",style:{verticalAlign:"middle"},rules:[{pattern:/^\d+$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u9A8C\u8BC1\u7801"}]}),(0,e.jsx)("img",{style:{height:"32px",verticalAlign:"middle",cursor:"pointer",float:"right"},src:"data:image/gif;base64,"+X,onClick:g})]})]}),S.code===500&&j==="mobile"&&(0,e.jsx)(fe,{content:S.msg||"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),j==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.Z,{fieldProps:{size:"middle",prefix:(0,e.jsx)(Ze.Z,{className:n().prefixIcon})},name:"mobile",placeholder:"\u624B\u673A\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u60A8\u7684\u624B\u673A\u53F7\u7801"},{pattern:/^1\d{10}$/,message:"\u4E0D\u5408\u6CD5\u7684\u624B\u673A\u53F7\uFF01"}]}),(0,e.jsx)(De,{fieldProps:{size:"large",prefix:(0,e.jsx)(oe.Z,{className:n().prefixIcon})},captchaProps:{size:"middle"},placeholder:"\u77ED\u4FE1\u9A8C\u8BC1\u7801",captchaTextRender:function(u,r){return u?"".concat(r," ","\u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u60A8\u7684\u9A8C\u8BC1\u7801"}],onGetCaptcha:function(){var s=(0,x.Z)(l().mark(function u(r){var d;return l().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ze({phone:r});case 2:if(d=o.sent,d!==!1){o.next=5;break}return o.abrupt("return");case 5:L.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return o.stop()}},u)}));return function(u){return s.apply(this,arguments)}}()})]}),(0,e.jsx)("div",{style:{marginBottom:24},children:(0,e.jsx)(Ue,{noStyle:!0,name:"autoLogin",children:"\u8BB0\u4F4F\u5BC6\u7801"})})]}),(0,e.jsxs)(W.Z,{className:n().other,children:["\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F :",(0,e.jsx)(je.Z,{className:n().icon}),(0,e.jsx)(ye.Z,{className:n().icon}),(0,e.jsx)(Ce.Z,{className:n().icon})]}),(0,e.jsx)(We.Z,{})]})]})})]})})},Je=He}}]);
