(self.webpackChunkruoyi_react=self.webpackChunkruoyi_react||[]).push([[599],{86615:function(ie,K,u){"use strict";var oe=u(88983),A=u(47933),z=u(22122),P=u(28991),T=u(81253),M=u(67294),_=u(49983),i=u(22270),v=u(64893),k=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],t=M.forwardRef(function(s,w){var S=s.fieldProps,H=s.options,D=s.radioType,ee=s.layout,B=s.proFieldProps,ae=s.valueEnum,Z=(0,T.Z)(s,k);return M.createElement(_.Z,(0,z.Z)({mode:"edit",valueType:D==="button"?"radioButton":"radio",ref:w,valueEnum:(0,i.h)(ae,void 0)},Z,{fieldProps:(0,P.Z)({options:H,layout:ee},S),proFieldProps:B,filedConfig:{customLightMode:!0}}))}),X=M.forwardRef(function(s,w){var S=s.fieldProps,H=s.children;return M.createElement(A.ZP,(0,z.Z)({},S,{ref:w}),H)}),Y=(0,v.G)(X,{valuePropName:"checked",ignoreWidth:!0}),F=Y;F.Group=t,F.Button=A.ZP.Button,F.displayName="ProFormComponent",K.Z=F},92635:function(ie,K,u){"use strict";u.r(K),u.d(K,{default:function(){return Be}});var oe=u(71194),A=u(50146),z=u(57663),P=u(71577),T=u(2824),M=u(11849),_=u(34792),i=u(48086),v=u(3182),k=u(94043),t=u.n(k),X=u(49101),Y=u(73171),F=u(67294),s=u(43581),w=u(21349),S=u(85224),H=u(19374),D=u(67300),ee=u(13062),B=u(71230),ae=u(89032),Z=u(15746),xe=u(9715),ue=u(86835),se=u(31199),ce=u(19054),$=u(5966),fe=u(86615),e=u(85893),me=function(r){var m=ue.Z.useForm(),o=(0,T.Z)(m,1),n=o[0],E=r.statusOptions,a=r.deptTree;(0,F.useEffect)(function(){n.resetFields(),n.setFieldsValue({deptId:r.values.deptId,parentId:r.values.parentId,ancestors:r.values.ancestors,deptName:r.values.deptName,orderNum:r.values.orderNum,leader:r.values.leader,phone:r.values.phone,email:r.values.email,status:r.values.status,delFlag:r.values.delFlag,createBy:r.values.createBy,createTime:r.values.createTime,updateBy:r.values.updateBy,updateTime:r.values.updateTime})},[n,r]);var l=(0,s.YB)(),G=function(){n.submit()},Q=function(){r.onCancel(),n.resetFields()},O=function(){var C=(0,v.Z)(t().mark(function R(h){return t().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:r.onSubmit(h);case 1:case"end":return L.stop()}},R)}));return function(h){return C.apply(this,arguments)}}();return(0,e.jsx)(A.Z,{width:640,title:l.formatMessage({id:"system.Dept.modify",defaultMessage:"\u7F16\u8F91Dept"}),visible:r.visible,destroyOnClose:!0,onOk:G,onCancel:Q,children:(0,e.jsxs)(ue.Z,{form:n,onFinish:O,initialValues:r.values,children:[(0,e.jsx)(B.Z,{gutter:[16,16],children:(0,e.jsx)(Z.Z,{span:24,order:1,children:(0,e.jsx)(se.Z,{name:"deptId",label:l.formatMessage({id:"system.Dept.dept_id",defaultMessage:"\u90E8\u95E8id"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8id",disabled:!0,hidden:!r.values.deptId,rules:[{required:!1,message:(0,e.jsx)(s._H,{id:"\u8BF7\u8F93\u5165\u90E8\u95E8id\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u90E8\u95E8id\uFF01"})}]})})}),(0,e.jsx)(B.Z,{gutter:[16,16],children:(0,e.jsx)(Z.Z,{span:24,order:1,children:(0,e.jsx)(ce.Z,{name:"parentId",label:l.formatMessage({id:"system.Dept.parent_dept",defaultMessage:"\u4E0A\u7EA7\u90E8\u95E8:"}),request:(0,v.Z)(t().mark(function C(){return t().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",a);case 1:case"end":return h.stop()}},C)})),width:"xl",placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",rules:[{required:!0,message:(0,e.jsx)(s._H,{id:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0\uFF01",defaultMessage:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8!"})}]})})}),(0,e.jsx)(B.Z,{gutter:[16,16],children:(0,e.jsx)(Z.Z,{span:24,order:1,children:(0,e.jsx)($.Z,{name:"ancestors",label:l.formatMessage({id:"system.Dept.ancestors",defaultMessage:"\u7956\u7EA7\u5217\u8868"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u7956\u7EA7\u5217\u8868",hidden:!0,rules:[{required:!1,message:(0,e.jsx)(s._H,{id:"\u8BF7\u8F93\u5165\u7956\u7EA7\u5217\u8868\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u7956\u7EA7\u5217\u8868\uFF01"})}]})})}),(0,e.jsx)(B.Z,{gutter:[16,16],children:(0,e.jsx)(Z.Z,{span:24,order:1,children:(0,e.jsx)($.Z,{name:"deptName",label:l.formatMessage({id:"system.Dept.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",rules:[{required:!1,message:(0,e.jsx)(s._H,{id:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0\uFF01"})}]})})}),(0,e.jsx)(B.Z,{gutter:[16,16],children:(0,e.jsx)(Z.Z,{span:24,order:1,children:(0,e.jsx)(se.Z,{name:"orderNum",label:l.formatMessage({id:"system.Dept.order_num",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F",rules:[{required:!1,message:(0,e.jsx)(s._H,{id:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01"})}]})})}),(0,e.jsx)(B.Z,{gutter:[16,16],children:(0,e.jsx)(Z.Z,{span:24,order:1,children:(0,e.jsx)($.Z,{name:"leader",label:l.formatMessage({id:"system.Dept.leader",defaultMessage:"\u8D1F\u8D23\u4EBA"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA",rules:[{required:!1,message:(0,e.jsx)(s._H,{id:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\uFF01"})}]})})}),(0,e.jsx)(B.Z,{gutter:[16,16],children:(0,e.jsx)(Z.Z,{span:24,order:1,children:(0,e.jsx)($.Z,{name:"phone",label:l.formatMessage({id:"system.Dept.phone",defaultMessage:"\u8054\u7CFB\u7535\u8BDD"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",rules:[{required:!1,message:(0,e.jsx)(s._H,{id:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD\uFF01"})}]})})}),(0,e.jsx)(B.Z,{gutter:[16,16],children:(0,e.jsx)(Z.Z,{span:24,order:1,children:(0,e.jsx)($.Z,{name:"email",label:l.formatMessage({id:"system.Dept.email",defaultMessage:"\u90AE\u7BB1"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:[{required:!1,message:(0,e.jsx)(s._H,{id:"\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF01"})}]})})}),(0,e.jsx)(B.Z,{gutter:[16,16],children:(0,e.jsx)(Z.Z,{span:24,order:1,children:(0,e.jsx)(fe.Z.Group,{valueEnum:E,name:"status",label:l.formatMessage({id:"system.Dept.status",defaultMessage:"\u90E8\u95E8\u72B6\u6001"}),labelCol:{span:24},width:"xl",placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u72B6\u6001",rules:[{required:!1,message:(0,e.jsx)(s._H,{id:"\u8BF7\u8F93\u5165\u90E8\u95E8\u72B6\u6001\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u90E8\u95E8\u72B6\u6001\uFF01"})}]})})})]})})},he=me,ve=u(52346),J=u(24480),pe=function(){var x=(0,v.Z)(t().mark(function r(m){var o,n;return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=i.default.loading("\u6B63\u5728\u6DFB\u52A0"),a.prev=1,a.next=4,(0,D.CZ)((0,M.Z)({},m));case 4:return n=a.sent,o(),n.code===200?i.default.success("\u6DFB\u52A0\u6210\u529F"):i.default.error(n.msg),a.abrupt("return",!0);case 10:return a.prev=10,a.t0=a.catch(1),o(),i.default.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 15:case"end":return a.stop()}},r,null,[[1,10]])}));return function(m){return x.apply(this,arguments)}}(),Fe=function(){var x=(0,v.Z)(t().mark(function r(m){var o,n;return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=i.default.loading("\u6B63\u5728\u914D\u7F6E"),a.prev=1,a.next=4,(0,D.MB)(m);case 4:return n=a.sent,o(),n.code===200?i.default.success("\u914D\u7F6E\u6210\u529F"):i.default.error(n.msg),a.abrupt("return",!0);case 10:return a.prev=10,a.t0=a.catch(1),o(),i.default.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 15:case"end":return a.stop()}},r,null,[[1,10]])}));return function(m){return x.apply(this,arguments)}}(),re=function(){var x=(0,v.Z)(t().mark(function r(m){var o,n;return t().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(o=i.default.loading("\u6B63\u5728\u5220\u9664"),m){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,D.X5)(m.map(function(l){return l.deptId}).join(","));case 6:return n=a.sent,o(),n.code===200?i.default.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):i.default.error(n.msg),a.abrupt("return",!0);case 12:return a.prev=12,a.t0=a.catch(3),o(),i.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),a.abrupt("return",!1);case 17:case"end":return a.stop()}},r,null,[[3,12]])}));return function(m){return x.apply(this,arguments)}}(),ge=function(){var x=(0,v.Z)(t().mark(function r(m){var o,n,E;return t().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(o=i.default.loading("\u6B63\u5728\u5220\u9664"),m){l.next=3;break}return l.abrupt("return",!0);case 3:return l.prev=3,n=[m.deptId],l.next=7,(0,D.X5)(n.join(","));case 7:return E=l.sent,o(),E.code===200?i.default.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):i.default.error(E.msg),l.abrupt("return",!0);case 13:return l.prev=13,l.t0=l.catch(3),o(),i.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),l.abrupt("return",!1);case 18:case"end":return l.stop()}},r,null,[[3,13]])}));return function(m){return x.apply(this,arguments)}}(),Ee=function(){var r=(0,F.useRef)(),m=(0,F.useState)(!1),o=(0,T.Z)(m,2),n=o[0],E=o[1],a=(0,F.useRef)(),l=(0,F.useState)(),G=(0,T.Z)(l,2),Q=G[0],O=G[1],C=(0,F.useState)([]),R=(0,T.Z)(C,2),h=R[0],V=R[1],L=(0,F.useState)([]),te=(0,T.Z)(L,2),Ze=te[0],le=te[1],ye=(0,F.useState)([]),ne=(0,T.Z)(ye,2),de=ne[0],je=ne[1],Me=(0,s.YB)(),W=(0,s.md)();(0,F.useEffect)(function(){(0,ve.zP)("sys_normal_disable").then(function(y){if(y.code===200){var g={};y.data.forEach(function(d){g[d.dictValue]=d.dictLabel}),je(g)}})},[]);var De=[{title:(0,e.jsx)(s._H,{id:"system.Dept.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0"}),dataIndex:"deptName",valueType:"text"},{title:(0,e.jsx)(s._H,{id:"system.Dept.order_num",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),dataIndex:"orderNum",valueType:"text"},{title:(0,e.jsx)(s._H,{id:"system.Dept.leader",defaultMessage:"\u8D1F\u8D23\u4EBA"}),dataIndex:"leader",valueType:"text"},{title:(0,e.jsx)(s._H,{id:"system.Dept.phone",defaultMessage:"\u8054\u7CFB\u7535\u8BDD"}),dataIndex:"phone",valueType:"text"},{title:(0,e.jsx)(s._H,{id:"system.Dept.email",defaultMessage:"\u90AE\u7BB1"}),dataIndex:"email",valueType:"text"},{title:(0,e.jsx)(s._H,{id:"system.Dept.status",defaultMessage:"\u90E8\u95E8\u72B6\u6001"}),dataIndex:"status",valueType:"select",valueEnum:de},{title:(0,e.jsx)(s._H,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",width:"220px",valueType:"option",render:function(g,d){return[(0,e.jsx)(P.Z,{type:"link",size:"small",hidden:!W.hasPerms("system:dept:edit"),onClick:function(){(0,D.PM)(d.deptId).then(function(p){if(p.code===200){var c=(0,J.C2)(p.data,"deptId","deptName","","","");c.length===0&&(c=[{id:0,title:"\u65E0\u4E0A\u7EA7",children:void 0,key:0,value:0}]),le(c),E(!0),O(d)}else i.default.warn(p.msg)})},children:(0,e.jsx)(s._H,{id:"pages.searchTable.edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,e.jsx)(P.Z,{type:"link",size:"small",danger:!0,hidden:!W.hasPerms("system:dept:remove"),onClick:(0,v.Z)(t().mark(function f(){return t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:A.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var j=(0,v.Z)(t().mark(function U(){var q;return t().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,ge(d);case 2:q=N.sent,q&&a.current&&a.current.reload();case 4:case"end":return N.stop()}},U)}));function I(){return j.apply(this,arguments)}return I}()});case 1:case"end":return c.stop()}},f)})),children:(0,e.jsx)(s._H,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})},"batchRemove")]}}];return(0,e.jsxs)(w.Z,{children:[(0,e.jsx)("div",{style:{width:"100%",float:"right"},children:(0,e.jsx)(H.ZP,{headerTitle:Me.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:a,formRef:r,rowKey:"deptId",search:{labelWidth:"auto"},toolBarRender:function(){return[(0,e.jsxs)(P.Z,{type:"primary",hidden:!W.hasPerms("system:dept:add"),onClick:(0,v.Z)(t().mark(function g(){return t().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:(0,D.U4)().then(function(p){p.code===200?(le((0,J.C2)(p.data,"deptId","deptName","","","")),O(void 0),E(!0)):i.default.warn(p.msg)});case 1:case"end":return f.stop()}},g)})),children:[(0,e.jsx)(X.Z,{})," ",(0,e.jsx)(s._H,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"add"),(0,e.jsxs)(P.Z,{type:"primary",hidden:(h==null?void 0:h.length)===0||!W.hasPerms("system:dept:remove"),onClick:(0,v.Z)(t().mark(function g(){var d,f,p;return t().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,re(h);case 2:d=j.sent,d&&(V([]),(f=a.current)===null||f===void 0||(p=f.reloadAndRest)===null||p===void 0||p.call(f));case 4:case"end":return j.stop()}},g)})),children:[(0,e.jsx)(Y.Z,{}),(0,e.jsx)(s._H,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})]},"remove")]},request:function(g){return(0,D.U4)((0,M.Z)({},g)).then(function(d){return{data:(0,J.C2)(d.data,"deptId","","","",""),total:d.data.length,success:!0}})},columns:De,rowSelection:{onChange:function(g,d){V(d)}}},"deptList")}),(h==null?void 0:h.length)>0&&(0,e.jsx)(S.Z,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(s._H,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"}),(0,e.jsx)("a",{style:{fontWeight:600},children:h.length}),(0,e.jsx)(s._H,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,e.jsx)(P.Z,{hidden:!W.hasPerms("system:dept:remove"),onClick:(0,v.Z)(t().mark(function y(){return t().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:A.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var f=(0,v.Z)(t().mark(function c(){var j,I,U;return t().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,re(h);case 2:j=b.sent,j&&(V([]),(I=a.current)===null||I===void 0||(U=I.reloadAndRest)===null||U===void 0||U.call(I));case 4:case"end":return b.stop()}},c)}));function p(){return f.apply(this,arguments)}return p}()});case 1:case"end":return d.stop()}},y)})),children:(0,e.jsx)(s._H,{id:"pages.searchTable.batchDeletion",defaultMessage:"\u6279\u91CF\u5220\u9664"})},"remove")}),(0,e.jsx)(he,{onSubmit:function(){var y=(0,v.Z)(t().mark(function g(d){var f;return t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(f=!1,!d.deptId){c.next=7;break}return c.next=4,Fe((0,M.Z)({},d));case 4:f=c.sent,c.next=10;break;case 7:return c.next=9,pe((0,M.Z)({},d));case 9:f=c.sent;case 10:f&&(E(!1),O(void 0),a.current&&a.current.reload());case 11:case"end":return c.stop()}},g)}));return function(g){return y.apply(this,arguments)}}(),onCancel:function(){E(!1),O(void 0)},visible:n,values:Q||{},deptTree:Ze,statusOptions:de})]})},Be=Ee}}]);
