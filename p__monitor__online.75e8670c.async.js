(self.webpackChunkruoyi_react=self.webpackChunkruoyi_react||[]).push([[5916],{78861:function(b,C,e){"use strict";e.r(C),e.d(C,{default:function(){return f}});var R=e(11849),k=e(62350),A=e(75443),Z=e(57663),S=e(71577),H=e(34792),j=e(48086),D=e(3182),U=e(94043),p=e.n(U),I=e(67294),l=e(43581),B=e(16894),w=e(11238),a=e(24480),o="xpfQ";function n(c,v){return g.apply(this,arguments)}function g(){return g=(0,D.Z)(p().mark(function c(v,h){return p().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,w.ZP)("/api/monitor/online/list",{params:(0,a.f)(v,h),method:"GET"}));case 1:case"end":return y.stop()}},c)})),g.apply(this,arguments)}function M(c){return E.apply(this,arguments)}function E(){return E=(0,D.Z)(p().mark(function c(v){return p().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,w.ZP)("/api/monitor/online/".concat(v),{method:"DELETE"}));case 1:case"end":return d.stop()}},c)})),E.apply(this,arguments)}var s=e(21349),x=e(30381),L=e.n(x),r=e(85893),i="97RK",m=function(){var c=(0,D.Z)(p().mark(function v(h){var d;return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return d=j.default.loading("\u6B63\u5728\u5F3A\u5236\u4E0B\u7EBF"),u.prev=1,u.next=4,M(h.tokenId);case 4:return d(),j.default.success("\u5F3A\u5236\u4E0B\u7EBF\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),d(),j.default.error("\u5F3A\u5236\u4E0B\u7EBF\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),u.abrupt("return",!1);case 14:case"end":return u.stop()}},v,null,[[1,9]])}));return function(h){return c.apply(this,arguments)}}(),t=function(){var v=(0,I.useRef)(),h=(0,I.useRef)(),d=(0,l.md)(),y=(0,l.YB)();(0,I.useEffect)(function(){},[]);var u=[{title:(0,r.jsx)(l._H,{"data-inspector-line":"37","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.token_id",defaultMessage:"\u4F1A\u8BDD\u7F16\u53F7",_nk:"".concat(i,"11")}),dataIndex:"tokenId",valueType:"text",hideInSearch:!0,ellipsis:!0,copyable:!0},{title:(0,r.jsx)(l._H,{"data-inspector-line":"45","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.user_name",defaultMessage:"\u7528\u6237\u8D26\u53F7",_nk:"".concat(i,"12")}),dataIndex:"userName",valueType:"text"},{title:(0,r.jsx)(l._H,{"data-inspector-line":"50","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0",_nk:"".concat(i,"13")}),dataIndex:"deptName",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(l._H,{"data-inspector-line":"56","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.ipaddr",defaultMessage:"\u767B\u5F55IP\u5730\u5740",_nk:"".concat(i,"14")}),dataIndex:"ipaddr",valueType:"text",copyable:!0},{title:(0,r.jsx)(l._H,{"data-inspector-line":"62","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.login_location",defaultMessage:"\u767B\u5F55\u5730\u70B9",_nk:"".concat(i,"15")}),dataIndex:"loginLocation",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(l._H,{"data-inspector-line":"68","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.browser",defaultMessage:"\u6D4F\u89C8\u5668\u7C7B\u578B",_nk:"".concat(i,"16")}),dataIndex:"browser",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(l._H,{"data-inspector-line":"74","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.os",defaultMessage:"\u64CD\u4F5C\u7CFB\u7EDF",_nk:"".concat(i,"17")}),dataIndex:"os",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(l._H,{"data-inspector-line":"80","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.login_time",defaultMessage:"\u767B\u5F55\u65F6\u95F4",_nk:"".concat(i,"18")}),dataIndex:"loginTime",valueType:"dateRange",hideInSearch:!0,render:function(T,O){return(0,r.jsx)("span",{"data-inspector-line":"84","data-inspector-column":"29","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",_nk:"".concat(i,"21"),children:L()(O.loginTime).format("yyyy-MM-DD HH:mm:ss")})},search:{transform:function(T){return{"params[beginTime]":T[0],"params[endTime]":T[1]}}}},{title:(0,r.jsx)(l._H,{"data-inspector-line":"95","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C",_nk:"".concat(i,"19")}),dataIndex:"option",valueType:"option",render:function(T,O){return[(0,r.jsx)(A.Z,{"data-inspector-line":"99","data-inspector-column":"8","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",placement:"top",title:"\u786E\u5B9A\u5F3A\u5236\u5C06\u8BE5\u7528\u6237\u8E22\u4E0B\u7EBF\u5417\uFF1F",onConfirm:(0,D.Z)(p().mark(function $(){var N;return p().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,m(O);case 2:N=F.sent,N&&h.current&&h.current.reload();case 4:case"end":return F.stop()}},$)})),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",_nk:"".concat(i,"31"),children:(0,r.jsx)(S.Z,{"data-inspector-line":"114","data-inspector-column":"10","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",type:"link",size:"small",danger:!0,hidden:!d.hasPerms("system:user:remove"),_nk:"".concat(i,"41"),children:"\u5F3A\u9000"},"batchRemove")},"remove")]}}];return(0,r.jsx)(s.Z,{"data-inspector-line":"129","data-inspector-column":"4","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",_nk:"".concat(i,"51"),children:(0,r.jsx)("div",{"data-inspector-line":"130","data-inspector-column":"6","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",style:{width:"100%",float:"right"},_nk:"".concat(i,"61"),children:(0,r.jsx)(B.ZP,{"data-inspector-line":"131","data-inspector-column":"8","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",headerTitle:y.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:h,formRef:v,rowKey:"infoId",search:{labelWidth:"auto"},request:function(T,O){return n((0,R.Z)({},T),O)},columns:u,_nk:"".concat(i,"71")},"logininforList")})})},f=t},24480:function(b,C,e){"use strict";e.d(C,{C2:function(){return U},wC:function(){return I},f:function(){return B},JG:function(){return w}});var R=e(17673),k="JlWx",A="/user/login",Z=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/,S=function(o){return Z.test(o)},H=function(){return window.location.hostname==="preview.pro.ant.design"},j=function(){var o="production";return o==="development"?!0:H()};function D(a){return a.replace(/^\s+|\s+$/gm,"")}function U(a,o,n,g,M,E){var s={id:o||"id",name:n||"name",parentId:g||"parentId",parentName:M||"parentName",childrenList:E||"children"},x={},L={},r=[];a.forEach(function(m){var t=m,f=t[s.parentId];x[f]==null&&(x[f]=[]),t.key=t[s.id],t.title=t[s.name],t.value=t[s.id],L[t[s.id]]=t,x[f].push(t)}),a.forEach(function(m){var t=m,f=t[s.parentId];L[f]==null&&(t[s.parentName]="",r.push(t))}),r.forEach(function(m){i(m)});function i(m){var t=m;x[t[s.id]]!==null&&(t[s.childrenList]=x[t[s.id]]),t[s.childrenList]&&t[s.childrenList].forEach(function(f){var c=f;c[s.parentName]=t[s.name],i(c)})}return r}var p=function(){return parse(window.location.href.split("?")[1])};function I(a){var o=a.map(function(n){var g={id:n.id,title:n.label,key:"".concat(n.id),value:n.id};return n.children&&(g.children=I(n.children)),g});return o}function l(a){window.location.href="/api/common/download?fileName=".concat(encodeURI(a),"&delete=",!0)}function B(a,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(a.orderByColumn=n,a.isAsc=o[n]==="descend"?"descending":"ascending");return a}function w(a,o){var n=document.createElement("textarea");n.readOnly=!0,n.style.position="absolute",n.style.left="-9999px",n.value=a,document.body.appendChild(n),n.select(),n.setSelectionRange(0,n.value.length),document.execCommand("Copy"),document.body.removeChild(n),o&&Object.prototype.toString.call(o)==="[object Function]"&&o()}}}]);
