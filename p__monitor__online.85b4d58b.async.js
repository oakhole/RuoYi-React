(self.webpackChunkruoyi_react=self.webpackChunkruoyi_react||[]).push([[5916],{78861:function(R,F,e){"use strict";e.r(F),e.d(F,{default:function(){return m}});var P=e(11849),H=e(62350),L=e(75443),S=e(57663),U=e(71577),N=e(34792),j=e(48086),x=e(3182),A=e(94043),u=e.n(A),w=e(67294),o=e(43581),t=e(43686),i=e(11238),s=e(24480);function y(d,f){return T.apply(this,arguments)}function T(){return T=(0,x.Z)(u().mark(function d(f,v){return u().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,i.ZP)("/api/monitor/online/list",{params:(0,s.f)(f,v),method:"GET"}));case 1:case"end":return g.stop()}},d)})),T.apply(this,arguments)}function B(d){return a.apply(this,arguments)}function a(){return a=(0,x.Z)(u().mark(function d(f){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,i.ZP)("/api/monitor/online/".concat(f),{method:"DELETE"}));case 1:case"end":return c.stop()}},d)})),a.apply(this,arguments)}var h=e(21349),C=e(30381),D=e.n(C),r=e(85893),p=function(){var d=(0,x.Z)(u().mark(function f(v){var c;return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return c=j.default.loading("\u6B63\u5728\u5F3A\u5236\u4E0B\u7EBF"),l.prev=1,l.next=4,B(v.tokenId);case 4:return c(),j.default.success("\u5F3A\u5236\u4E0B\u7EBF\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),l.abrupt("return",!0);case 9:return l.prev=9,l.t0=l.catch(1),c(),j.default.error("\u5F3A\u5236\u4E0B\u7EBF\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),l.abrupt("return",!1);case 14:case"end":return l.stop()}},f,null,[[1,9]])}));return function(v){return d.apply(this,arguments)}}(),n=function(){var f=(0,w.useRef)(),v=(0,w.useRef)(),c=(0,o.md)(),g=(0,o.YB)();(0,w.useEffect)(function(){},[]);var l=[{title:(0,r.jsx)(o._H,{"data-inspector-line":"37","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.token_id",defaultMessage:"\u4F1A\u8BDD\u7F16\u53F7"}),dataIndex:"tokenId",valueType:"text",hideInSearch:!0,ellipsis:!0,copyable:!0},{title:(0,r.jsx)(o._H,{"data-inspector-line":"45","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.user_name",defaultMessage:"\u7528\u6237\u8D26\u53F7"}),dataIndex:"userName",valueType:"text"},{title:(0,r.jsx)(o._H,{"data-inspector-line":"50","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0"}),dataIndex:"deptName",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(o._H,{"data-inspector-line":"56","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.ipaddr",defaultMessage:"\u767B\u5F55IP\u5730\u5740"}),dataIndex:"ipaddr",valueType:"text",copyable:!0},{title:(0,r.jsx)(o._H,{"data-inspector-line":"62","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.login_location",defaultMessage:"\u767B\u5F55\u5730\u70B9"}),dataIndex:"loginLocation",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(o._H,{"data-inspector-line":"68","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.browser",defaultMessage:"\u6D4F\u89C8\u5668\u7C7B\u578B"}),dataIndex:"browser",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(o._H,{"data-inspector-line":"74","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.os",defaultMessage:"\u64CD\u4F5C\u7CFB\u7EDF"}),dataIndex:"os",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(o._H,{"data-inspector-line":"80","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.login_time",defaultMessage:"\u767B\u5F55\u65F6\u95F4"}),dataIndex:"loginTime",valueType:"dateRange",hideInSearch:!0,render:function(I,E){return(0,r.jsx)("span",{"data-inspector-line":"84","data-inspector-column":"29","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",children:D()(E.loginTime).format("yyyy-MM-DD HH:mm:ss")})},search:{transform:function(I){return{"params[beginTime]":I[0],"params[endTime]":I[1]}}}},{title:(0,r.jsx)(o._H,{"data-inspector-line":"95","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(I,E){return[(0,r.jsx)(L.Z,{"data-inspector-line":"99","data-inspector-column":"8","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",placement:"top",title:"\u786E\u5B9A\u5F3A\u5236\u5C06\u8BE5\u7528\u6237\u8E22\u4E0B\u7EBF\u5417\uFF1F",onConfirm:(0,x.Z)(u().mark(function $(){var Z;return u().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,p(E);case 2:Z=O.sent,Z&&v.current&&v.current.reload();case 4:case"end":return O.stop()}},$)})),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,r.jsx)(U.Z,{"data-inspector-line":"114","data-inspector-column":"10","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",type:"link",size:"small",danger:!0,hidden:!c.hasPerms("system:user:remove"),children:"\u5F3A\u9000"},"batchRemove")},"remove")]}}];return(0,r.jsx)(h.Z,{"data-inspector-line":"129","data-inspector-column":"4","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",children:(0,r.jsx)("div",{"data-inspector-line":"130","data-inspector-column":"6","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",style:{width:"100%",float:"right"},children:(0,r.jsx)(t.ZP,{"data-inspector-line":"131","data-inspector-column":"8","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",headerTitle:g.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:v,formRef:f,rowKey:"infoId",search:{labelWidth:"auto"},request:function(I,E){return y((0,P.Z)({},I),E)},columns:l},"logininforList")})})},m=n},24480:function(R,F,e){"use strict";e.d(F,{C2:function(){return x},wC:function(){return u},f:function(){return o}});var P=e(17673),H="/user/login",L=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/,S=function(i){return L.test(i)},U=function(){return window.location.hostname==="preview.pro.ant.design"},N=function(){var i="production";return i==="development"?!0:U()};function j(t){return t.replace(/^\s+|\s+$/gm,"")}function x(t,i,s,y,T,B){var a={id:i||"id",name:s||"name",parentId:y||"parentId",parentName:T||"parentName",childrenList:B||"children"},h={},C={},D=[];t.forEach(function(p){var n=p,m=n[a.parentId];h[m]==null&&(h[m]=[]),n.key=n[a.id],n.title=n[a.name],n.value=n[a.id],C[n[a.id]]=n,h[m].push(n)}),t.forEach(function(p){var n=p,m=n[a.parentId];C[m]==null&&(n[a.parentName]="",D.push(n))}),D.forEach(function(p){r(p)});function r(p){var n=p;h[n[a.id]]!==null&&(n[a.childrenList]=h[n[a.id]]),n[a.childrenList]&&n[a.childrenList].forEach(function(m){var d=m;d[a.parentName]=n[a.name],r(d)})}return D}var A=function(){return parse(window.location.href.split("?")[1])};function u(t){var i=t.map(function(s){var y={id:s.id,title:s.label,key:"".concat(s.id),value:s.id};return s.children&&(y.children=u(s.children)),y});return i}function w(t){window.location.href="/api/common/download?fileName=".concat(encodeURI(t),"&delete=",!0)}function o(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t.orderByColumn=s,t.isAsc=i[s]==="descend"?"descending":"ascending");return t}}}]);
