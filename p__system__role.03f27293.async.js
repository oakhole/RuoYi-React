(self.webpackChunkruoyi_react=self.webpackChunkruoyi_react||[]).push([[6932],{31199:function($,C,e){"use strict";var M=e(22122),T=e(28991),d=e(81253),D=e(67294),m=e(63990),_=["fieldProps","min","proFieldProps","max"],j=function(v,R){var s=v.fieldProps,y=v.min,l=v.proFieldProps,p=v.max,a=(0,d.Z)(v,_);return D.createElement(m.Z,(0,M.Z)({mode:"edit",valueType:"digit",fieldProps:(0,T.Z)({min:y,max:p},s),ref:R,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:l},a))};C.Z=D.forwardRef(j)},86615:function($,C,e){"use strict";var M=e(88983),T=e(47933),d=e(22122),D=e(28991),m=e(81253),_=e(67294),j=e(63990),c=e(22270),v=e(64893),R=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],s=_.forwardRef(function(a,t){var h=a.fieldProps,u=a.options,n=a.radioType,o=a.layout,E=a.proFieldProps,P=a.valueEnum,H=(0,m.Z)(a,R);return _.createElement(j.Z,(0,d.Z)({mode:"edit",valueType:n==="button"?"radioButton":"radio",ref:t,valueEnum:(0,c.h)(P,void 0)},H,{fieldProps:(0,D.Z)({options:u,layout:o},h),proFieldProps:E,filedConfig:{customLightMode:!0}}))}),y=_.forwardRef(function(a,t){var h=a.fieldProps,u=a.children;return _.createElement(T.ZP,(0,d.Z)({},h,{ref:t}),u)}),l=(0,v.G)(y,{valuePropName:"checked",ignoreWidth:!0}),p=l;p.Group=s,p.Button=T.ZP.Button,p.displayName="ProFormComponent",C.Z=p},5966:function($,C,e){"use strict";var M=e(22122),T=e(81253),d=e(67294),D=e(63990),m=["fieldProps","proFieldProps"],_=["fieldProps","proFieldProps"],j="text",c=function(y){var l=y.fieldProps,p=y.proFieldProps,a=(0,T.Z)(y,m);return d.createElement(D.Z,(0,M.Z)({mode:"edit",valueType:j,fieldProps:l,filedConfig:{valueType:j},proFieldProps:p},a))},v=function(y){var l=y.fieldProps,p=y.proFieldProps,a=(0,T.Z)(y,_);return d.createElement(D.Z,(0,M.Z)({mode:"edit",valueType:"password",fieldProps:l,proFieldProps:p,filedConfig:{valueType:j}},a))},R=c;R.Password=v,R.displayName="ProFormComponent",C.Z=R},90672:function($,C,e){"use strict";var M=e(22122),T=e(81253),d=e(67294),D=e(63990),m=["fieldProps","proFieldProps"],_=function(c,v){var R=c.fieldProps,s=c.proFieldProps,y=(0,T.Z)(c,m);return d.createElement(D.Z,(0,M.Z)({ref:v,mode:"edit",valueType:"textarea",fieldProps:R,proFieldProps:s},y))};C.Z=d.forwardRef(_)},85224:function($,C,e){"use strict";var M=e(22122),T=e(28991),d=e(84305),D=e(75901),m=e(81253),_=e(67294),j=e(94184),c=e.n(j),v=e(97435),R=e(56264),s=e.n(R),y=e(64335),l=["children","className","extra","style","renderContent"],p=function(t){var h=t.children,u=t.className,n=t.extra,o=t.style,E=t.renderContent,P=(0,m.Z)(t,l),H=(0,_.useContext)(D.ZP.ConfigContext),W=H.getPrefixCls,O=t.prefixCls||W("pro"),U="".concat(O,"-footer-bar"),Z=(0,_.useContext)(y.Z),re=(0,_.useMemo)(function(){var z=Z.hasSiderMenu,le=Z.isMobile,oe=Z.siderWidth;if(!!z)return oe?le?"100%":"calc(100% - ".concat(oe,"px)"):"100%"},[Z.collapsed,Z.hasSiderMenu,Z.isMobile,Z.siderWidth]),ue=_.createElement(_.Fragment,null,_.createElement("div",{className:"".concat(U,"-left")},n),_.createElement("div",{className:"".concat(U,"-right")},h));return(0,_.useEffect)(function(){return!Z||!(Z==null?void 0:Z.setHasFooterToolbar)?function(){}:(Z==null||Z.setHasFooterToolbar(!0),function(){var z;Z==null||(z=Z.setHasFooterToolbar)===null||z===void 0||z.call(Z,!1)})},[]),_.createElement("div",(0,M.Z)({className:c()(u,"".concat(U)),style:(0,T.Z)({width:re},o)},(0,v.Z)(P,["prefixCls"])),E?E((0,T.Z)((0,T.Z)((0,T.Z)({},t),Z),{},{leftWidth:re}),ue):ue)};C.Z=p},56264:function($){$.exports={"ant-pro-footer-bar":"ant-pro-footer-bar","ant-pro-footer-bar-left":"ant-pro-footer-bar-left","ant-pro-footer-bar-right":"ant-pro-footer-bar-right"}},52346:function($,C,e){"use strict";e.d(C,{jK:function(){return j},Vd:function(){return v},zP:function(){return R},oH:function(){return s},a7:function(){return l},sF:function(){return a},n2:function(){return h}});var M=e(3182),T=e(94043),d=e.n(T),D=e(66548),m=e(11238),_=e(24480);function j(u,n){return c.apply(this,arguments)}function c(){return c=(0,M.Z)(d().mark(function u(n,o){return d().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,m.ZP)("/api/system/dict/type/list",{params:(0,_.f)(n,o),method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return P.stop()}},u)})),c.apply(this,arguments)}function v(u){return(0,m.ZP)("/api/system/dict/type/".concat(u),{method:"GET"})}function R(u){return(0,m.ZP)("/api/system/dict/data/type/".concat(u),{method:"GET"})}function s(u){return y.apply(this,arguments)}function y(){return y=(0,M.Z)(d().mark(function u(n){return d().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,m.ZP)("/api/system/dict/type",{method:"POST",data:n}));case 1:case"end":return E.stop()}},u)})),y.apply(this,arguments)}function l(u){return p.apply(this,arguments)}function p(){return p=(0,M.Z)(d().mark(function u(n){return d().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,m.ZP)("/api/system/dict/type",{method:"PUT",data:n}));case 1:case"end":return E.stop()}},u)})),p.apply(this,arguments)}function a(u){return t.apply(this,arguments)}function t(){return t=(0,M.Z)(d().mark(function u(n){return d().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,m.ZP)("/api/system/dict/type/".concat(n),{method:"DELETE",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return E.stop()}},u)})),t.apply(this,arguments)}function h(u){return(0,D.su)("/api/system/dict/type/export",{params:u},"dict_type_".concat(new Date().getTime(),".xlsx"))}},78759:function($,C,e){"use strict";e.d(C,{Af:function(){return _},Th:function(){return v},bL:function(){return R},_8:function(){return y},n_:function(){return p}});var M=e(3182),T=e(94043),d=e.n(T),D=e(66548),m=e(11238);function _(h){return j.apply(this,arguments)}function j(){return j=(0,M.Z)(d().mark(function h(u){var n;return d().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return n=new URLSearchParams(u).toString(),E.abrupt("return",(0,m.ZP)("/api/system/menu/list",{data:u,method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 2:case"end":return E.stop()}},h)})),j.apply(this,arguments)}function c(h){return request("/api/system/menu/".concat(h),{method:"GET"})}function v(){return(0,m.ZP)("/api/system/menu/treeselect",{method:"GET"})}function R(h){return s.apply(this,arguments)}function s(){return s=(0,M.Z)(d().mark(function h(u){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.ZP)("/api/system/menu",{method:"POST",data:u}));case 1:case"end":return o.stop()}},h)})),s.apply(this,arguments)}function y(h){return l.apply(this,arguments)}function l(){return l=(0,M.Z)(d().mark(function h(u){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.ZP)("/api/system/menu",{method:"PUT",data:u}));case 1:case"end":return o.stop()}},h)})),l.apply(this,arguments)}function p(h){return a.apply(this,arguments)}function a(){return a=(0,M.Z)(d().mark(function h(u){return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.ZP)("/api/system/menu/".concat(u),{method:"DELETE",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return o.stop()}},h)})),a.apply(this,arguments)}function t(h){return downLoadXlsx("/api/system/menu/export",{params:h},"menu_".concat(new Date().getTime(),".xlsx"))}},16042:function($,C,e){"use strict";e.r(C),e.d(C,{default:function(){return Ce}});var M=e(71194),T=e(50146),d=e(57663),D=e(71577),m=e(2824),_=e(11849),j=e(34792),c=e(48086),v=e(3182),R=e(94043),s=e.n(R),y=e(49101),l=e(73171),p=e(48176),a=e(67294),t=e(43581),h=e(21349),u=e(85224),n=e(19374),o=e(94370),E=e(32157),P=e(7573),H=e(13062),W=e(71230),O=e(89032),U=e(15746),Z=e(9715),re=e(86835),ue=e(952),z=e(31199),le=e(5966),oe=e(86615),Pe=e(90672),r=e(85893),ye=function(f){var B=re.Z.useForm(),x=(0,m.Z)(B,1),g=x[0],K=f.menuTree,i=f.menuCheckedKeys,A=(0,a.useState)(),te=(0,m.Z)(A,2),ie=te[0],V=te[1],de=f.statusOptions;(0,a.useEffect)(function(){g.resetFields(),g.setFieldsValue({roleId:f.values.roleId,roleName:f.values.roleName,roleKey:f.values.roleKey,roleSort:f.values.roleSort,dataScope:f.values.dataScope,menuCheckStrictly:f.values.menuCheckStrictly,deptCheckStrictly:f.values.deptCheckStrictly,status:f.values.status,delFlag:f.values.delFlag,createBy:f.values.createBy,createTime:f.values.createTime,updateBy:f.values.updateBy,updateTime:f.values.updateTime,remark:f.values.remark,menuIds:f.values.menuIds})},[g,f]);var k=(0,t.YB)(),Y=function(){g.submit()},ae=function(){f.onCancel(),g.resetFields()},ce=function(J){f.onSubmit((0,_.Z)((0,_.Z)({},J),{},{menuIds:ie}))};return(0,r.jsx)(T.Z,{width:640,title:k.formatMessage({id:"system.Role.modify_info",defaultMessage:"\u7F16\u8F91\u89D2\u8272\u4FE1\u606F"}),visible:f.visible,destroyOnClose:!0,onOk:Y,onCancel:ae,children:(0,r.jsxs)(re.Z,{form:g,onFinish:ce,initialValues:f.values,children:[(0,r.jsx)(W.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(z.Z,{name:"roleId",label:k.formatMessage({id:"system.Role.role_id",defaultMessage:"\u89D2\u8272ID"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272ID",disabled:!0,hidden:!f.values.roleId,rules:[{required:!1,message:(0,r.jsx)(t._H,{id:"\u8BF7\u8F93\u5165\u89D2\u8272ID\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272ID\uFF01"})}]})})}),(0,r.jsx)(W.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(le.Z,{name:"roleName",label:k.formatMessage({id:"system.Role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",rules:[{required:!0,message:(0,r.jsx)(t._H,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01"})}]})})}),(0,r.jsx)(W.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(le.Z,{name:"roleKey",label:k.formatMessage({id:"system.Role.role_key",defaultMessage:"\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32",rules:[{required:!0,message:(0,r.jsx)(t._H,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01"})}]})})}),(0,r.jsx)(W.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(z.Z,{name:"roleSort",label:k.formatMessage({id:"system.Role.role_sort",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F",rules:[{required:!0,message:(0,r.jsx)(t._H,{id:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01"})}]})})}),(0,r.jsx)(W.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(oe.Z.Group,{valueEnum:de,name:"status",label:k.formatMessage({id:"system.Role.status",defaultMessage:"\u89D2\u8272\u72B6\u6001"}),labelCol:{span:24},width:"xl",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001",rules:[{required:!0,message:(0,r.jsx)(t._H,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001\uFF01"})}]})})}),(0,r.jsx)(W.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(ue.ZP.Item,{name:"menuIds",label:k.formatMessage({id:"system.Role.auth",defaultMessage:"\u83DC\u5355\u6743\u9650"}),children:(0,r.jsx)(P.Z,{checkable:!0,multiple:!0,checkStrictly:!0,defaultExpandAll:!1,treeData:K,defaultCheckedKeys:i,onCheck:function(J){V(J.checked)}})})})}),(0,r.jsx)(W.Z,{gutter:[16,16],children:(0,r.jsx)(U.Z,{span:24,order:1,children:(0,r.jsx)(Pe.Z,{name:"remark",label:k.formatMessage({id:"system.Role.remark",defaultMessage:"\u5907\u6CE8"}),width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",rules:[{required:!1,message:(0,r.jsx)(t._H,{id:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF01"})}]})})})]})})},ge=ye,Me=e(52346),Te=e(78759),fe=e(24480),De=function(){var G=(0,v.Z)(s().mark(function f(B){var x,g;return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return x=c.default.loading("\u6B63\u5728\u6DFB\u52A0"),i.prev=1,i.next=4,(0,o._d)((0,_.Z)({},B));case 4:return g=i.sent,x(),g.code===200?c.default.success("\u6DFB\u52A0\u6210\u529F"):c.default.error(g.msg),i.abrupt("return",!0);case 10:return i.prev=10,i.t0=i.catch(1),x(),c.default.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),i.abrupt("return",!1);case 15:case"end":return i.stop()}},f,null,[[1,10]])}));return function(B){return G.apply(this,arguments)}}(),Re=function(){var G=(0,v.Z)(s().mark(function f(B){var x,g;return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return x=c.default.loading("\u6B63\u5728\u914D\u7F6E"),i.prev=1,i.next=4,(0,o.ul)(B);case 4:return g=i.sent,x(),g.code===200?c.default.success("\u914D\u7F6E\u6210\u529F"):c.default.error(g.msg),i.abrupt("return",!0);case 10:return i.prev=10,i.t0=i.catch(1),x(),c.default.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),i.abrupt("return",!1);case 15:case"end":return i.stop()}},f,null,[[1,10]])}));return function(B){return G.apply(this,arguments)}}(),pe=function(){var G=(0,v.Z)(s().mark(function f(B){var x,g;return s().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(x=c.default.loading("\u6B63\u5728\u5220\u9664"),B){i.next=3;break}return i.abrupt("return",!0);case 3:return i.prev=3,i.next=6,(0,o.l5)(B.map(function(A){return A.roleId}).join(","));case 6:return g=i.sent,x(),g.code===200?c.default.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):c.default.error(g.msg),i.abrupt("return",!0);case 12:return i.prev=12,i.t0=i.catch(3),x(),c.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),i.abrupt("return",!1);case 17:case"end":return i.stop()}},f,null,[[3,12]])}));return function(B){return G.apply(this,arguments)}}(),Fe=function(){var G=(0,v.Z)(s().mark(function f(B){var x,g,K;return s().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(x=c.default.loading("\u6B63\u5728\u5220\u9664"),B){A.next=3;break}return A.abrupt("return",!0);case 3:return A.prev=3,g=[B.roleId],A.next=7,(0,o.l5)(g.join(","));case 7:return K=A.sent,x(),K.code===200?c.default.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):c.default.error(K.msg),A.abrupt("return",!0);case 13:return A.prev=13,A.t0=A.catch(3),x(),c.default.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),A.abrupt("return",!1);case 18:case"end":return A.stop()}},f,null,[[3,13]])}));return function(B){return G.apply(this,arguments)}}(),Oe=function(){var G=(0,v.Z)(s().mark(function f(){var B;return s().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return B=c.default.loading("\u6B63\u5728\u5BFC\u51FA"),g.prev=1,g.next=4,(0,o.Lp)();case 4:return B(),c.default.success("\u5BFC\u51FA\u6210\u529F"),g.abrupt("return",!0);case 9:return g.prev=9,g.t0=g.catch(1),B(),c.default.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),g.abrupt("return",!1);case 14:case"end":return g.stop()}},f,null,[[1,9]])}));return function(){return G.apply(this,arguments)}}(),Ze=function(){var f=(0,a.useRef)(),B=(0,a.useState)(!1),x=(0,m.Z)(B,2),g=x[0],K=x[1],i=(0,a.useRef)(),A=(0,a.useState)(),te=(0,m.Z)(A,2),ie=te[0],V=te[1],de=(0,a.useState)([]),k=(0,m.Z)(de,2),Y=k[0],ae=k[1],ce=(0,a.useState)([]),X=(0,m.Z)(ce,2),J=X[0],be=X[1],je=(0,a.useState)(),_e=(0,m.Z)(je,2),Be=_e[0],he=_e[1],xe=(0,a.useState)([]),ve=(0,m.Z)(xe,2),Ie=ve[0],Ee=ve[1],Q=(0,t.md)(),Le=(0,t.YB)();(0,a.useEffect)(function(){(0,Me.zP)("sys_normal_disable").then(function(S){if(S.code===200){var I={};S.data.forEach(function(F){I[F.dictValue]=F.dictLabel}),be(I)}})},[]);var Ue=[{title:(0,r.jsx)(t._H,{id:"system.Role.role_id",defaultMessage:"\u89D2\u8272ID"}),dataIndex:"roleId",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(t._H,{id:"system.Role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),dataIndex:"roleName",valueType:"text"},{title:(0,r.jsx)(t._H,{id:"system.Role.role_key",defaultMessage:"\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32"}),dataIndex:"roleKey",valueType:"text"},{title:(0,r.jsx)(t._H,{id:"system.Role.role_sort",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),dataIndex:"roleSort",valueType:"text",sorter:!0},{title:(0,r.jsx)(t._H,{id:"system.Role.status",defaultMessage:"\u89D2\u8272\u72B6\u6001"}),dataIndex:"status",valueType:"select",valueEnum:J},{title:(0,r.jsx)(t._H,{id:"system.Role.create_time",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"createTime",valueType:"dateRange",sorter:!0,defaultSortOrder:"descend",render:function(I,F){return(0,r.jsx)("span",{children:F.createTime})},search:{transform:function(I){return{"params[beginTime]":I[0],"params[endTime]":I[1]}}},hideInSearch:!0},{title:(0,r.jsx)(t._H,{id:"system.Role.remark",defaultMessage:"\u5907\u6CE8"}),dataIndex:"remark",valueType:"textarea",hideInSearch:!0},{title:(0,r.jsx)(t._H,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",width:"220px",valueType:"option",render:function(I,F){return[(0,r.jsx)(D.Z,{type:"link",size:"small",hidden:!Q.hasPerms("system:role:edit"),onClick:function(){(0,o.mj)(F.roleId).then(function(w){if(w.code===200){var L=(0,fe.wC)(w.menus);he(L),Ee(w.checkedKeys.map(function(N){return"".concat(N)})),K(!0),V(F)}else c.default.warn(w.msg)})},children:(0,r.jsx)(t._H,{id:"pages.searchTable.edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,r.jsx)(D.Z,{type:"link",size:"small",danger:!0,hidden:!Q.hasPerms("system:role:remove"),onClick:(0,v.Z)(s().mark(function b(){return s().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:T.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var N=(0,v.Z)(s().mark(function ne(){var me;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,Fe(F);case 2:me=se.sent,me&&i.current&&i.current.reload();case 4:case"end":return se.stop()}},ne)}));function q(){return N.apply(this,arguments)}return q}()});case 1:case"end":return L.stop()}},b)})),children:(0,r.jsx)(t._H,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})},"batchRemove")]}}];return(0,r.jsxs)(h.Z,{children:[(0,r.jsx)("div",{style:{width:"100%",float:"right"},children:(0,r.jsx)(n.ZP,{headerTitle:Le.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:i,formRef:f,rowKey:"roleId",search:{labelWidth:"auto"},toolBarRender:function(){return[(0,r.jsxs)(D.Z,{type:"text",hidden:!Q.hasPerms("system:role:add"),onClick:(0,v.Z)(s().mark(function I(){return s().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:(0,Te.Th)().then(function(w){if(w.code===200){var L=(0,fe.wC)(w.data);he(L),Ee([]),K(!0),V(void 0)}else c.default.warn(w.msg)});case 1:case"end":return b.stop()}},I)})),children:[(0,r.jsx)(y.Z,{})," ",(0,r.jsx)(t._H,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"add"),(0,r.jsxs)(D.Z,{danger:!0,type:"text",hidden:(Y==null?void 0:Y.length)===0||!Q.hasPerms("system:role:remove"),onClick:(0,v.Z)(s().mark(function I(){var F,b,w;return s().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,pe(Y);case 2:F=N.sent,F&&(ae([]),(b=i.current)===null||b===void 0||(w=b.reloadAndRest)===null||w===void 0||w.call(b));case 4:case"end":return N.stop()}},I)})),children:[(0,r.jsx)(l.Z,{})," ",(0,r.jsx)(t._H,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})]},"remove"),(0,r.jsxs)(D.Z,{type:"text",hidden:!Q.hasPerms("system:role:export"),onClick:(0,v.Z)(s().mark(function I(){return s().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:Oe();case 1:case"end":return b.stop()}},I)})),children:[(0,r.jsx)(p.Z,{})," ",(0,r.jsx)(t._H,{id:"pages.searchTable.export",defaultMessage:"\u5BFC\u51FA"})]},"export")]},request:function(I,F){return(0,o.JV)((0,_.Z)({},I),F)},columns:Ue,rowSelection:{onChange:function(I,F){ae(F)}}},"roleList")}),(Y==null?void 0:Y.length)>0&&(0,r.jsx)(u.Z,{extra:(0,r.jsxs)("div",{children:[(0,r.jsx)(t._H,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"}),(0,r.jsx)("a",{style:{fontWeight:600},children:Y.length}),(0,r.jsx)(t._H,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,r.jsx)(D.Z,{hidden:!Q.hasPerms("system:role:remove"),onClick:(0,v.Z)(s().mark(function S(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:T.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var b=(0,v.Z)(s().mark(function L(){var N,q,ne;return s().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,pe(Y);case 2:N=ee.sent,N&&(ae([]),(q=i.current)===null||q===void 0||(ne=q.reloadAndRest)===null||ne===void 0||ne.call(q));case 4:case"end":return ee.stop()}},L)}));function w(){return b.apply(this,arguments)}return w}()});case 1:case"end":return F.stop()}},S)})),children:(0,r.jsx)(t._H,{id:"pages.searchTable.batchDeletion",defaultMessage:"\u6279\u91CF\u5220\u9664"})},"remove")}),(0,r.jsx)(ge,{onSubmit:function(){var S=(0,v.Z)(s().mark(function I(F){var b;return s().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(b=!1,!F.roleId){L.next=7;break}return L.next=4,Re((0,_.Z)({},F));case 4:b=L.sent,L.next=10;break;case 7:return L.next=9,De((0,_.Z)({},F));case 9:b=L.sent;case 10:b&&(K(!1),V(void 0),i.current&&i.current.reload());case 11:case"end":return L.stop()}},I)}));return function(I){return S.apply(this,arguments)}}(),onCancel:function(){K(!1),V(void 0)},visible:g,values:ie||{},menuTree:Be||[],menuCheckedKeys:Ie||[],statusOptions:J})]})},Ce=Ze},94370:function($,C,e){"use strict";e.d(C,{JV:function(){return j},_d:function(){return R},ul:function(){return y},l5:function(){return p},Lp:function(){return t},mj:function(){return u}});var M=e(3182),T=e(94043),d=e.n(T),D=e(66548),m=e(11238),_=e(24480);function j(n,o){return c.apply(this,arguments)}function c(){return c=(0,M.Z)(d().mark(function n(o,E){return d().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,m.ZP)("/api/system/role/list",{params:(0,_.f)(o,E),method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return H.stop()}},n)})),c.apply(this,arguments)}function v(n){return request("/api/system/role/".concat(n),{method:"GET"})}function R(n){return s.apply(this,arguments)}function s(){return s=(0,M.Z)(d().mark(function n(o){return d().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,m.ZP)("/api/system/role",{method:"POST",data:o}));case 1:case"end":return P.stop()}},n)})),s.apply(this,arguments)}function y(n){return l.apply(this,arguments)}function l(){return l=(0,M.Z)(d().mark(function n(o){return d().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,m.ZP)("/api/system/role",{method:"PUT",data:o}));case 1:case"end":return P.stop()}},n)})),l.apply(this,arguments)}function p(n){return a.apply(this,arguments)}function a(){return a=(0,M.Z)(d().mark(function n(o){return d().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,m.ZP)("/api/system/role/".concat(o),{method:"DELETE",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return P.stop()}},n)})),a.apply(this,arguments)}function t(n){return h.apply(this,arguments)}function h(){return h=(0,M.Z)(d().mark(function n(o){return d().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,D.su)("/api/system/role/export",{params:o},"role_".concat(new Date().getTime(),".xlsx")));case 1:case"end":return P.stop()}},n)})),h.apply(this,arguments)}function u(n){return(0,m.ZP)("/api/system/menu/roleMenuTreeselect/".concat(n),{method:"get"})}},66548:function($,C,e){"use strict";e.d(C,{su:function(){return v}});var M=e(11849),T=e(3182),d=e(94043),D=e.n(d),m=e(11238),_={xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",zip:"application/zip"};function j(s){request(s,{method:"GET",responseType:"blob",getResponse:!0}).then(function(y){c(y,_.zip)})}function c(s,y){var l=document.createElement("a"),p=new Blob([s.data],{type:y}),a=new RegExp("filename=([^;]+\\.[^\\.;]+);*"),t=decodeURI(s.response.headers.get("content-disposition")),h=a.exec(t),u=h?h[1]:"file";u=u.replace(/"/g,""),l.style.display="none",l.href=URL.createObjectURL(p),l.setAttribute("download",u),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)}function v(s,y,l){return R.apply(this,arguments)}function R(){return R=(0,T.Z)(D().mark(function s(y,l,p){return D().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.ZP)(y,(0,M.Z)((0,M.Z)({},l),{},{method:"POST",responseType:"blob"})).then(function(h){var u=document.createElement("a"),n=h;u.style.display="none",u.href=URL.createObjectURL(n),u.setAttribute("download",p),document.body.appendChild(u),u.click(),URL.revokeObjectURL(u.href),document.body.removeChild(u)}));case 1:case"end":return t.stop()}},s)})),R.apply(this,arguments)}},24480:function($,C,e){"use strict";e.d(C,{C2:function(){return c},wC:function(){return R},f:function(){return y}});var M=e(17673),T="/user/login",d=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/,D=function(p){return d.test(p)},m=function(){return window.location.hostname==="preview.pro.ant.design"},_=function(){var p="production";return p==="development"?!0:m()};function j(l){return l.replace(/^\s+|\s+$/gm,"")}function c(l,p,a,t,h,u){var n={id:p||"id",name:a||"name",parentId:t||"parentId",parentName:h||"parentName",childrenList:u||"children"},o={},E={},P=[];l.forEach(function(W){var O=W,U=O[n.parentId];o[U]==null&&(o[U]=[]),O.key=O[n.id],O.title=O[n.name],O.value=O[n.id],E[O[n.id]]=O,o[U].push(O)}),l.forEach(function(W){var O=W,U=O[n.parentId];E[U]==null&&(O[n.parentName]="",P.push(O))}),P.forEach(function(W){H(W)});function H(W){var O=W;o[O[n.id]]!==null&&(O[n.childrenList]=o[O[n.id]]),O[n.childrenList]&&O[n.childrenList].forEach(function(U){var Z=U;Z[n.parentName]=O[n.name],H(Z)})}return P}var v=function(){return parse(window.location.href.split("?")[1])};function R(l){var p=l.map(function(a){var t={id:a.id,title:a.label,key:"".concat(a.id),value:a.id};return a.children&&(t.children=R(a.children)),t});return p}function s(l){window.location.href="/api/common/download?fileName=".concat(encodeURI(l),"&delete=",!0)}function y(l,p){for(var a in p)Object.prototype.hasOwnProperty.call(p,a)&&(l.orderByColumn=a,l.isAsc=p[a]==="descend"?"descending":"ascending");return l}}}]);
