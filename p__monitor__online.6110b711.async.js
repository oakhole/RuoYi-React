(self.webpackChunkruoyi_react=self.webpackChunkruoyi_react||[]).push([[5916],{78861:function(A,D,n){"use strict";n.r(D),n.d(D,{default:function(){return f}});var B=n(11849),Z=n(62350),j=n(75443),R=n(57663),C=n(71577),S=n(34792),O=n(48086),h=n(3182),P=n(94043),c=n.n(P),F=n(67294),u=n(43581),t=n(19374),s=n(11238),o=n(24480);function g(e,i){return y.apply(this,arguments)}function y(){return y=(0,h.Z)(c().mark(function e(i,l){return c().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,s.ZP)("/api/monitor/online/list",{params:(0,o.f)(i,l),method:"GET"}));case 1:case"end":return v.stop()}},e)})),y.apply(this,arguments)}function L(e){return a.apply(this,arguments)}function a(){return a=(0,h.Z)(c().mark(function e(i){return c().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,s.ZP)("/api/monitor/online/".concat(i),{method:"DELETE"}));case 1:case"end":return p.stop()}},e)})),a.apply(this,arguments)}var m=n(21349),r=n(85893),I=function(){var e=(0,h.Z)(c().mark(function i(l){var p;return c().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return p=O.default.loading("\u6B63\u5728\u5F3A\u5236\u4E0B\u7EBF"),d.prev=1,d.next=4,L(l.tokenId);case 4:return p(),O.default.success("\u5F3A\u5236\u4E0B\u7EBF\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),d.abrupt("return",!0);case 9:return d.prev=9,d.t0=d.catch(1),p(),O.default.error("\u5F3A\u5236\u4E0B\u7EBF\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),d.abrupt("return",!1);case 14:case"end":return d.stop()}},i,null,[[1,9]])}));return function(l){return e.apply(this,arguments)}}(),w=function(){var i=(0,F.useRef)(),l=(0,F.useRef)(),p=(0,u.md)(),v=(0,u.YB)();(0,F.useEffect)(function(){},[]);var d=[{title:(0,r.jsx)(u._H,{"data-inspector-line":"36","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.token_id",defaultMessage:"\u4F1A\u8BDD\u7F16\u53F7"}),dataIndex:"tokenId",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(u._H,{"data-inspector-line":"42","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.user_name",defaultMessage:"\u7528\u6237\u8D26\u53F7"}),dataIndex:"userName",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(u._H,{"data-inspector-line":"48","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0"}),dataIndex:"deptName",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(u._H,{"data-inspector-line":"54","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.ipaddr",defaultMessage:"\u767B\u5F55IP\u5730\u5740"}),dataIndex:"ipaddr",valueType:"text",copyable:!0},{title:(0,r.jsx)(u._H,{"data-inspector-line":"60","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.login_location",defaultMessage:"\u767B\u5F55\u5730\u70B9"}),dataIndex:"loginLocation",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(u._H,{"data-inspector-line":"66","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.browser",defaultMessage:"\u6D4F\u89C8\u5668\u7C7B\u578B"}),dataIndex:"browser",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(u._H,{"data-inspector-line":"72","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.os",defaultMessage:"\u64CD\u4F5C\u7CFB\u7EDF"}),dataIndex:"os",valueType:"text",hideInSearch:!0},{title:(0,r.jsx)(u._H,{"data-inspector-line":"78","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.login_time",defaultMessage:"\u767B\u5F55\u65F6\u95F4"}),dataIndex:"loginTime",valueType:"dateRange",render:function(x,T){return(0,r.jsx)("span",{"data-inspector-line":"81","data-inspector-column":"29","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",children:T.loginTime})},search:{transform:function(x){return{"params[beginTime]":x[0],"params[endTime]":x[1]}}}},{title:(0,r.jsx)(u._H,{"data-inspector-line":"92","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(x,T){return[(0,r.jsx)(j.Z,{"data-inspector-line":"96","data-inspector-column":"8","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",placement:"top",title:"\u786E\u5B9A\u5F3A\u5236\u5C06\u8BE5\u7528\u6237\u8E22\u4E0B\u7EBF\u5417\uFF1F",onConfirm:(0,h.Z)(c().mark(function H(){var M;return c().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,I(T);case 2:M=E.sent,M&&l.current&&l.current.reload();case 4:case"end":return E.stop()}},H)})),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,r.jsx)(C.Z,{"data-inspector-line":"111","data-inspector-column":"10","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",type:"link",size:"small",danger:!0,hidden:!p.hasPerms("system:user:remove"),children:"\u5F3A\u9000"},"batchRemove")},"remove")]}}];return(0,r.jsx)(m.Z,{"data-inspector-line":"126","data-inspector-column":"4","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",children:(0,r.jsx)("div",{"data-inspector-line":"127","data-inspector-column":"6","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",style:{width:"100%",float:"right"},children:(0,r.jsx)(t.ZP,{"data-inspector-line":"128","data-inspector-column":"8","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",headerTitle:v.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:l,formRef:i,rowKey:"infoId",search:{labelWidth:"auto"},request:function(x,T){return g((0,B.Z)({},x),T)},columns:d},"logininforList")})})},f=w},24480:function(A,D,n){"use strict";n.d(D,{C2:function(){return h},wC:function(){return c},f:function(){return u}});var B=n(17673),Z="/user/login",j=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/,R=function(s){return j.test(s)},C=function(){return window.location.hostname==="preview.pro.ant.design"},S=function(){var s="production";return s==="development"?!0:C()};function O(t){return t.replace(/^\s+|\s+$/gm,"")}function h(t,s,o,g,y,L){var a={id:s||"id",name:o||"name",parentId:g||"parentId",parentName:y||"parentName",childrenList:L||"children"},m={},r={},I=[];t.forEach(function(f){var e=f,i=e[a.parentId];m[i]==null&&(m[i]=[]),e.key=e[a.id],e.title=e[a.name],e.value=e[a.id],r[e[a.id]]=e,m[i].push(e)}),t.forEach(function(f){var e=f,i=e[a.parentId];r[i]==null&&(e[a.parentName]="",I.push(e))}),I.forEach(function(f){w(f)});function w(f){var e=f;m[e[a.id]]!==null&&(e[a.childrenList]=m[e[a.id]]),e[a.childrenList]&&e[a.childrenList].forEach(function(i){var l=i;l[a.parentName]=e[a.name],w(l)})}return I}var P=function(){return parse(window.location.href.split("?")[1])};function c(t){var s=t.map(function(o){var g={id:o.id,title:o.label,key:"".concat(o.id),value:o.id};return o.children&&(g.children=c(o.children)),g});return s}function F(t){window.location.href="/api/common/download?fileName=".concat(encodeURI(t),"&delete=",!0)}function u(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t.orderByColumn=o,t.isAsc=s[o]==="descend"?"descending":"ascending");return t}}}]);
