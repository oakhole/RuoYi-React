(self.webpackChunkruoyi_react=self.webpackChunkruoyi_react||[]).push([[5916],{78861:function(H,O,n){"use strict";n.r(O),n.d(O,{default:function(){return t}});var B=n(11849),b=n(62350),M=n(24565),P=n(57663),R=n(71577),m=n(39428),k=n(34792),F=n(48086),x=n(3182),C=n(67294),u=n(43581),A=n(16894),Z=n(11238),w=n(24480),a="xpfQ";function o(l,c){return e.apply(this,arguments)}function e(){return e=(0,x.Z)((0,m.Z)().mark(function l(c,v){return(0,m.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,Z.ZP)("/api/monitor/online/list",{params:(0,w.f)(c,v),method:"GET"}));case 1:case"end":return g.stop()}},l)})),e.apply(this,arguments)}function y(l){return T.apply(this,arguments)}function T(){return T=(0,x.Z)((0,m.Z)().mark(function l(c){return(0,m.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,Z.ZP)("/api/monitor/online/".concat(c),{method:"DELETE"}));case 1:case"end":return p.stop()}},l)})),T.apply(this,arguments)}var L=n(21349),s=n(30381),h=n.n(s),i=n(85893),r="97RK",j=function(){var l=(0,x.Z)((0,m.Z)().mark(function c(v){var p;return(0,m.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return p=F.default.loading("\u6B63\u5728\u5F3A\u5236\u4E0B\u7EBF"),d.prev=1,d.next=4,y(v.tokenId);case 4:return p(),F.default.success("\u5F3A\u5236\u4E0B\u7EBF\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),d.abrupt("return",!0);case 9:return d.prev=9,d.t0=d.catch(1),p(),F.default.error("\u5F3A\u5236\u4E0B\u7EBF\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),d.abrupt("return",!1);case 14:case"end":return d.stop()}},c,null,[[1,9]])}));return function(v){return l.apply(this,arguments)}}(),f=function(){var c=(0,C.useRef)(),v=(0,C.useRef)(),p=(0,u.md)(),g=(0,u.YB)();(0,C.useEffect)(function(){},[]);var d=[{title:(0,i.jsx)(u._H,{"data-inspector-line":"37","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.token_id",defaultMessage:"\u4F1A\u8BDD\u7F16\u53F7",_nk:"".concat(r,"11")}),dataIndex:"tokenId",valueType:"text",hideInSearch:!0,ellipsis:!0,copyable:!0},{title:(0,i.jsx)(u._H,{"data-inspector-line":"45","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.user_name",defaultMessage:"\u7528\u6237\u8D26\u53F7",_nk:"".concat(r,"12")}),dataIndex:"userName",valueType:"text"},{title:(0,i.jsx)(u._H,{"data-inspector-line":"50","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0",_nk:"".concat(r,"13")}),dataIndex:"deptName",valueType:"text",hideInSearch:!0},{title:(0,i.jsx)(u._H,{"data-inspector-line":"56","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.ipaddr",defaultMessage:"\u767B\u5F55IP\u5730\u5740",_nk:"".concat(r,"14")}),dataIndex:"ipaddr",valueType:"text",copyable:!0},{title:(0,i.jsx)(u._H,{"data-inspector-line":"62","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.login_location",defaultMessage:"\u767B\u5F55\u5730\u70B9",_nk:"".concat(r,"15")}),dataIndex:"loginLocation",valueType:"text",hideInSearch:!0},{title:(0,i.jsx)(u._H,{"data-inspector-line":"68","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.browser",defaultMessage:"\u6D4F\u89C8\u5668\u7C7B\u578B",_nk:"".concat(r,"16")}),dataIndex:"browser",valueType:"text",hideInSearch:!0},{title:(0,i.jsx)(u._H,{"data-inspector-line":"74","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.os",defaultMessage:"\u64CD\u4F5C\u7CFB\u7EDF",_nk:"".concat(r,"17")}),dataIndex:"os",valueType:"text",hideInSearch:!0},{title:(0,i.jsx)(u._H,{"data-inspector-line":"80","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.login_time",defaultMessage:"\u767B\u5F55\u65F6\u95F4",_nk:"".concat(r,"18")}),dataIndex:"loginTime",valueType:"dateRange",hideInSearch:!0,render:function(I,D){return(0,i.jsx)("span",{"data-inspector-line":"84","data-inspector-column":"29","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",_nk:"".concat(r,"21"),children:h()(D.loginTime).format("yyyy-MM-DD HH:mm:ss")})},search:{transform:function(I){return{"params[beginTime]":I[0],"params[endTime]":I[1]}}}},{title:(0,i.jsx)(u._H,{"data-inspector-line":"95","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C",_nk:"".concat(r,"19")}),dataIndex:"option",valueType:"option",render:function(I,D){return[(0,i.jsx)(M.Z,{"data-inspector-line":"99","data-inspector-column":"8","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",placement:"top",title:"\u786E\u5B9A\u5F3A\u5236\u5C06\u8BE5\u7528\u6237\u8E22\u4E0B\u7EBF\u5417\uFF1F",onConfirm:(0,x.Z)((0,m.Z)().mark(function N(){var S;return(0,m.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,j(D);case 2:S=E.sent,S&&v.current&&v.current.reload();case 4:case"end":return E.stop()}},N)})),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",_nk:"".concat(r,"31"),children:(0,i.jsx)(R.Z,{"data-inspector-line":"114","data-inspector-column":"10","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",type:"link",size:"small",danger:!0,hidden:!p.hasPerms("system:user:remove"),_nk:"".concat(r,"41"),children:"\u5F3A\u9000"},"batchRemove")},"remove")]}}];return(0,i.jsx)(L.Z,{"data-inspector-line":"129","data-inspector-column":"4","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",_nk:"".concat(r,"51"),children:(0,i.jsx)("div",{"data-inspector-line":"130","data-inspector-column":"6","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",style:{width:"100%",float:"right"},_nk:"".concat(r,"61"),children:(0,i.jsx)(A.ZP,{"data-inspector-line":"131","data-inspector-column":"8","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",headerTitle:g.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:v,formRef:c,rowKey:"infoId",search:{labelWidth:"auto"},request:function(I,D){return o((0,B.Z)({},I),D)},columns:d,_nk:"".concat(r,"71")},"logininforList")})})},t=f},24480:function(H,O,n){"use strict";n.d(O,{C2:function(){return x},wC:function(){return u},f:function(){return Z},JG:function(){return w}});var B=n(17673),b="JlWx",M="/user/login",P=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/,R=function(o){return P.test(o)},m=function(){return window.location.hostname==="preview.pro.ant.design"},k=function(){var o="production";return o==="development"?!0:m()};function F(a){return a.replace(/^\s+|\s+$/gm,"")}function x(a,o,e,y,T,L){var s={id:o||"id",name:e||"name",parentId:y||"parentId",parentName:T||"parentName",childrenList:L||"children"},h={},i={},r=[];a.forEach(function(f){var t=f,l=t[s.parentId];h[l]==null&&(h[l]=[]),t.key=t[s.id],t.title=t[s.name],t.value=t[s.id],i[t[s.id]]=t,h[l].push(t)}),a.forEach(function(f){var t=f,l=t[s.parentId];i[l]==null&&(t[s.parentName]="",r.push(t))}),r.forEach(function(f){j(f)});function j(f){var t=f;h[t[s.id]]!==null&&(t[s.childrenList]=h[t[s.id]]),t[s.childrenList]&&t[s.childrenList].forEach(function(l){var c=l;c[s.parentName]=t[s.name],j(c)})}return r}var C=function(){return parse(window.location.href.split("?")[1])};function u(a){var o=a.map(function(e){var y={id:e.id,title:e.label,key:"".concat(e.id),value:e.id};return e.children&&(y.children=u(e.children)),y});return o}function A(a){window.location.href="/api/common/download?fileName=".concat(encodeURI(a),"&delete=",!0)}function Z(a,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(a.orderByColumn=e,a.isAsc=o[e]==="descend"?"descending":"ascending");return a}function w(a,o){var e=document.createElement("textarea");e.readOnly=!0,e.style.position="absolute",e.style.left="-9999px",e.value=a,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e),o&&Object.prototype.toString.call(o)==="[object Function]"&&o()}}}]);
