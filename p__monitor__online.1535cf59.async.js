(self.webpackChunkruoyi_react=self.webpackChunkruoyi_react||[]).push([[5916],{78861:function(A,D,n){"use strict";n.r(D),n.d(D,{default:function(){return v}});var B=n(11849),Z=n(62350),j=n(75443),R=n(57663),C=n(71577),S=n(34792),O=n(48086),p=n(3182),P=n(94043),c=n.n(P),F=n(67294),l=n(43581),r=n(19374),u=n(11238),s=n(24480);function g(e,i){return I.apply(this,arguments)}function I(){return I=(0,p.Z)(c().mark(function e(i,o){return c().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,u.ZP)("/api/monitor/online/list",{params:(0,s.f)(i,o),method:"GET"}));case 1:case"end":return m.stop()}},e)})),I.apply(this,arguments)}function L(e){return t.apply(this,arguments)}function t(){return t=(0,p.Z)(c().mark(function e(i){return c().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,u.ZP)("/api/monitor/online/".concat(i),{method:"DELETE"}));case 1:case"end":return f.stop()}},e)})),t.apply(this,arguments)}var h=n(21349),a=n(85893),T=function(){var e=(0,p.Z)(c().mark(function i(o){var f;return c().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return f=O.default.loading("\u6B63\u5728\u5F3A\u5236\u4E0B\u7EBF"),d.prev=1,d.next=4,L(o.tokenId);case 4:return f(),O.default.success("\u5F3A\u5236\u4E0B\u7EBF\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),d.abrupt("return",!0);case 9:return d.prev=9,d.t0=d.catch(1),f(),O.default.error("\u5F3A\u5236\u4E0B\u7EBF\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),d.abrupt("return",!1);case 14:case"end":return d.stop()}},i,null,[[1,9]])}));return function(o){return e.apply(this,arguments)}}(),w=function(){var i=(0,F.useRef)(),o=(0,F.useRef)(),f=(0,l.md)(),m=(0,l.YB)();(0,F.useEffect)(function(){},[]);var d=[{title:(0,a.jsx)(l._H,{id:"monitor.OnlineUser.token_id",defaultMessage:"\u4F1A\u8BDD\u7F16\u53F7"}),dataIndex:"tokenId",valueType:"text",hideInSearch:!0},{title:(0,a.jsx)(l._H,{id:"monitor.OnlineUser.user_name",defaultMessage:"\u7528\u6237\u8D26\u53F7"}),dataIndex:"userName",valueType:"text",hideInSearch:!0},{title:(0,a.jsx)(l._H,{id:"monitor.OnlineUser.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0"}),dataIndex:"deptName",valueType:"text",hideInSearch:!0},{title:(0,a.jsx)(l._H,{id:"monitor.OnlineUser.ipaddr",defaultMessage:"\u767B\u5F55IP\u5730\u5740"}),dataIndex:"ipaddr",valueType:"text",copyable:!0},{title:(0,a.jsx)(l._H,{id:"monitor.OnlineUser.login_location",defaultMessage:"\u767B\u5F55\u5730\u70B9"}),dataIndex:"loginLocation",valueType:"text",hideInSearch:!0},{title:(0,a.jsx)(l._H,{id:"monitor.OnlineUser.browser",defaultMessage:"\u6D4F\u89C8\u5668\u7C7B\u578B"}),dataIndex:"browser",valueType:"text",hideInSearch:!0},{title:(0,a.jsx)(l._H,{id:"monitor.OnlineUser.os",defaultMessage:"\u64CD\u4F5C\u7CFB\u7EDF"}),dataIndex:"os",valueType:"text",hideInSearch:!0},{title:(0,a.jsx)(l._H,{id:"monitor.OnlineUser.login_time",defaultMessage:"\u767B\u5F55\u65F6\u95F4"}),dataIndex:"loginTime",valueType:"dateRange",render:function(y,x){return(0,a.jsx)("span",{children:x.loginTime})},search:{transform:function(y){return{"params[beginTime]":y[0],"params[endTime]":y[1]}}}},{title:(0,a.jsx)(l._H,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(y,x){return[(0,a.jsx)(j.Z,{placement:"top",title:"\u786E\u5B9A\u5F3A\u5236\u5C06\u8BE5\u7528\u6237\u8E22\u4E0B\u7EBF\u5417\uFF1F",onConfirm:(0,p.Z)(c().mark(function H(){var M;return c().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,T(x);case 2:M=E.sent,M&&o.current&&o.current.reload();case 4:case"end":return E.stop()}},H)})),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,a.jsx)(C.Z,{type:"link",size:"small",danger:!0,hidden:!f.hasPerms("system:user:remove"),children:"\u5F3A\u9000"},"batchRemove")},"remove")]}}];return(0,a.jsx)(h.Z,{children:(0,a.jsx)("div",{style:{width:"100%",float:"right"},children:(0,a.jsx)(r.ZP,{headerTitle:m.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:o,formRef:i,rowKey:"infoId",search:{labelWidth:"auto"},request:function(y,x){return g((0,B.Z)({},y),x)},columns:d},"logininforList")})})},v=w},24480:function(A,D,n){"use strict";n.d(D,{C2:function(){return p},wC:function(){return c},f:function(){return l}});var B=n(17673),Z="/user/login",j=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/,R=function(u){return j.test(u)},C=function(){return window.location.hostname==="preview.pro.ant.design"},S=function(){var u="production";return u==="development"?!0:C()};function O(r){return r.replace(/^\s+|\s+$/gm,"")}function p(r,u,s,g,I,L){var t={id:u||"id",name:s||"name",parentId:g||"parentId",parentName:I||"parentName",childrenList:L||"children"},h={},a={},T=[];r.forEach(function(v){var e=v,i=e[t.parentId];h[i]==null&&(h[i]=[]),e.key=e[t.id],e.title=e[t.name],e.value=e[t.id],a[e[t.id]]=e,h[i].push(e)}),r.forEach(function(v){var e=v,i=e[t.parentId];a[i]==null&&(e[t.parentName]="",T.push(e))}),T.forEach(function(v){w(v)});function w(v){var e=v;h[e[t.id]]!==null&&(e[t.childrenList]=h[e[t.id]]),e[t.childrenList]&&e[t.childrenList].forEach(function(i){var o=i;o[t.parentName]=e[t.name],w(o)})}return T}var P=function(){return parse(window.location.href.split("?")[1])};function c(r){var u=r.map(function(s){var g={id:s.id,title:s.label,key:"".concat(s.id),value:s.id};return s.children&&(g.children=c(s.children)),g});return u}function F(r){window.location.href="/api/common/download?fileName=".concat(encodeURI(r),"&delete=",!0)}function l(r,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(r.orderByColumn=s,r.isAsc=u[s]==="descend"?"descending":"ascending");return r}}}]);
