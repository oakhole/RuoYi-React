(self.webpackChunkruoyi_react=self.webpackChunkruoyi_react||[]).push([[5916],{78861:function(k,j,e){"use strict";e.r(j),e.d(j,{default:function(){return L}});var A=e(11849),$=e(62350),R=e(75443),Z=e(57663),H=e(71577),S=e(34792),w=e(48086),T=e(3182),U=e(94043),d=e.n(U),x=e(67294),l=e(86353),B=e(43686),a=e(11238),o=e(24480),s="xpfQ";function y(v,f){return D.apply(this,arguments)}function D(){return D=(0,T.Z)(d().mark(function v(f,m){return d().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,a.ZP)("/api/monitor/online/list",{params:(0,o.f)(f,m),method:"GET"}));case 1:case"end":return g.stop()}},v)})),D.apply(this,arguments)}function M(v){return r.apply(this,arguments)}function r(){return r=(0,T.Z)(d().mark(function v(f){return d().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,a.ZP)("/api/monitor/online/".concat(f),{method:"DELETE"}));case 1:case"end":return c.stop()}},v)})),r.apply(this,arguments)}var h=e(21349),C=e(30381),E=e.n(C),i=e(85893),n="97RK",t=function(){var v=(0,T.Z)(d().mark(function f(m){var c;return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return c=w.default.loading("\u6B63\u5728\u5F3A\u5236\u4E0B\u7EBF"),u.prev=1,u.next=4,M(m.tokenId);case 4:return c(),w.default.success("\u5F3A\u5236\u4E0B\u7EBF\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),c(),w.default.error("\u5F3A\u5236\u4E0B\u7EBF\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),u.abrupt("return",!1);case 14:case"end":return u.stop()}},f,null,[[1,9]])}));return function(m){return v.apply(this,arguments)}}(),p=function(){var f=(0,x.useRef)(),m=(0,x.useRef)(),c=(0,l.md)(),g=(0,l.YB)();(0,x.useEffect)(function(){},[]);var u=[{title:(0,i.jsx)(l._H,{"data-inspector-line":"37","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.token_id",defaultMessage:"\u4F1A\u8BDD\u7F16\u53F7",_nk:"".concat(n,"11")}),dataIndex:"tokenId",valueType:"text",hideInSearch:!0,ellipsis:!0,copyable:!0},{title:(0,i.jsx)(l._H,{"data-inspector-line":"45","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.user_name",defaultMessage:"\u7528\u6237\u8D26\u53F7",_nk:"".concat(n,"12")}),dataIndex:"userName",valueType:"text"},{title:(0,i.jsx)(l._H,{"data-inspector-line":"50","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.dept_name",defaultMessage:"\u90E8\u95E8\u540D\u79F0",_nk:"".concat(n,"13")}),dataIndex:"deptName",valueType:"text",hideInSearch:!0},{title:(0,i.jsx)(l._H,{"data-inspector-line":"56","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.ipaddr",defaultMessage:"\u767B\u5F55IP\u5730\u5740",_nk:"".concat(n,"14")}),dataIndex:"ipaddr",valueType:"text",copyable:!0},{title:(0,i.jsx)(l._H,{"data-inspector-line":"62","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.login_location",defaultMessage:"\u767B\u5F55\u5730\u70B9",_nk:"".concat(n,"15")}),dataIndex:"loginLocation",valueType:"text",hideInSearch:!0},{title:(0,i.jsx)(l._H,{"data-inspector-line":"68","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.browser",defaultMessage:"\u6D4F\u89C8\u5668\u7C7B\u578B",_nk:"".concat(n,"16")}),dataIndex:"browser",valueType:"text",hideInSearch:!0},{title:(0,i.jsx)(l._H,{"data-inspector-line":"74","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.os",defaultMessage:"\u64CD\u4F5C\u7CFB\u7EDF",_nk:"".concat(n,"17")}),dataIndex:"os",valueType:"text",hideInSearch:!0},{title:(0,i.jsx)(l._H,{"data-inspector-line":"80","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"monitor.OnlineUser.login_time",defaultMessage:"\u767B\u5F55\u65F6\u95F4",_nk:"".concat(n,"18")}),dataIndex:"loginTime",valueType:"dateRange",hideInSearch:!0,render:function(I,O){return(0,i.jsx)("span",{"data-inspector-line":"84","data-inspector-column":"29","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",_nk:"".concat(n,"21"),children:E()(O.loginTime).format("yyyy-MM-DD HH:mm:ss")})},search:{transform:function(I){return{"params[beginTime]":I[0],"params[endTime]":I[1]}}}},{title:(0,i.jsx)(l._H,{"data-inspector-line":"95","data-inspector-column":"13","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C",_nk:"".concat(n,"19")}),dataIndex:"option",valueType:"option",render:function(I,O){return[(0,i.jsx)(R.Z,{"data-inspector-line":"99","data-inspector-column":"8","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",placement:"top",title:"\u786E\u5B9A\u5F3A\u5236\u5C06\u8BE5\u7528\u6237\u8E22\u4E0B\u7EBF\u5417\uFF1F",onConfirm:(0,T.Z)(d().mark(function b(){var N;return d().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,t(O);case 2:N=F.sent,N&&m.current&&m.current.reload();case 4:case"end":return F.stop()}},b)})),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",_nk:"".concat(n,"31"),children:(0,i.jsx)(H.Z,{"data-inspector-line":"114","data-inspector-column":"10","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",type:"link",size:"small",danger:!0,hidden:!c.hasPerms("system:user:remove"),_nk:"".concat(n,"41"),children:"\u5F3A\u9000"},"batchRemove")},"remove")]}}];return(0,i.jsx)(h.Z,{"data-inspector-line":"129","data-inspector-column":"4","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",_nk:"".concat(n,"51"),children:(0,i.jsx)("div",{"data-inspector-line":"130","data-inspector-column":"6","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",style:{width:"100%",float:"right"},_nk:"".concat(n,"61"),children:(0,i.jsx)(B.ZP,{"data-inspector-line":"131","data-inspector-column":"8","data-inspector-relative-path":"src/pages/monitor/online/index.tsx",headerTitle:g.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:m,formRef:f,rowKey:"infoId",search:{labelWidth:"auto"},request:function(I,O){return y((0,A.Z)({},I),O)},columns:u,_nk:"".concat(n,"71")},"logininforList")})})},L=p},24480:function(k,j,e){"use strict";e.d(j,{C2:function(){return U},wC:function(){return x},f:function(){return B}});var A=e(17673),$="JlWx",R="/user/login",Z=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/,H=function(o){return Z.test(o)},S=function(){return window.location.hostname==="preview.pro.ant.design"},w=function(){var o="production";return o==="development"?!0:S()};function T(a){return a.replace(/^\s+|\s+$/gm,"")}function U(a,o,s,y,D,M){var r={id:o||"id",name:s||"name",parentId:y||"parentId",parentName:D||"parentName",childrenList:M||"children"},h={},C={},E=[];a.forEach(function(n){var t=n,p=t[r.parentId];h[p]==null&&(h[p]=[]),t.key=t[r.id],t.title=t[r.name],t.value=t[r.id],C[t[r.id]]=t,h[p].push(t)}),a.forEach(function(n){var t=n,p=t[r.parentId];C[p]==null&&(t[r.parentName]="",E.push(t))}),E.forEach(function(n){i(n)});function i(n){var t=n;h[t[r.id]]!==null&&(t[r.childrenList]=h[t[r.id]]),t[r.childrenList]&&t[r.childrenList].forEach(function(p){var L=p;L[r.parentName]=t[r.name],i(L)})}return E}var d=function(){return parse(window.location.href.split("?")[1])};function x(a){var o=a.map(function(s){var y={id:s.id,title:s.label,key:"".concat(s.id),value:s.id};return s.children&&(y.children=x(s.children)),y});return o}function l(a){window.location.href="/api/common/download?fileName=".concat(encodeURI(a),"&delete=",!0)}function B(a,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(a.orderByColumn=s,a.isAsc=o[s]==="descend"?"descending":"ascending");return a}}}]);
